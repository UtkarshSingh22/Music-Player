(()=>{"use strict";const e=[{name:"On & On",artist:"Cartoon x HAVSUN x WAYOUT, ft. Daniel Levi",imageSrc:"/dist/song-images/on&on.jpg",songSrc:"/dist/sample-songs/Cartoon - On & On (ft. Daniel Levi)(Cartoon x HAVSUN x WAYOUT Remix) [NCS Release].mp3",duration:"03:58"},{name:"Mortals",artist:"Warriyo, feat. Laura Brehm",imageSrc:"/dist/song-images/warriyo.jpg",songSrc:"/dist/sample-songs/Warriyo - Mortals (feat. Laura Brehm) [NCS Release].mp3",duration:"03:48"},{name:"Cradles",artist:"Sub Urban",imageSrc:"/dist/song-images/cradles.jpg",songSrc:"/dist/sample-songs/Sub Urban - Cradles [NCS Release].mp3",duration:"03:29"},{name:"Adventures",artist:"William Ekh, feat. Alexa Lusader",imageSrc:"/dist/song-images/adventures.jpg",songSrc:"/dist/sample-songs/William Ekh - Adventures (feat. Alexa Lusader) [NCS Release].mp3",duration:"03:11"},{name:"Set Me Free",artist:"Simbai & Frizzy The Streetz",imageSrc:"/dist/song-images/setmefree.jpg",songSrc:"/dist/sample-songs/Simbai & Frizzy The Streetz - Set Me Free [NCS Release].mp3",duration:"02:49"},{name:"Heroes Tonight",artist:"Janji, ft.Johnning",imageSrc:"/dist/song-images/janji.jpg",songSrc:"/dist/sample-songs/Janji - Heroes Tonight (feat. Johnning) [NCS Release].mp3",duration:"03:28"}],t=(e,t,n)=>{const s=document.createElement("img");s.classList.add("card-img"),s.src=e;const a=document.createElement("div");a.classList.add("music-name"),a.textContent=t;const i=document.createElement("div");i.classList.add("artist-name"),i.textContent=n;const r=document.createElement("div");return r.classList.add("cards"),r.appendChild(s),r.appendChild(a),r.appendChild(i),r},n=t=>{const n=document.querySelector(".main");"songData"==n.lastChild.className&&n.removeChild(n.lastChild),n.appendChild((t=>{const n=document.createElement("div");n.classList="songData";const s=document.createElement("img");s.classList="mainImg",s.setAttribute("src",e[t].imageSrc);const a=document.createElement("div");a.classList="songName",a.textContent=e[t].name;const i=document.createElement("div");return i.classList="artist",i.textContent=e[t].artist,n.appendChild(s),n.appendChild(a),n.appendChild(i),n})(t))},s=t=>{let s=document.querySelector(".audioElement"),a=document.querySelector(".playBtn"),i=document.querySelector(".playBtnImg");const r=document.querySelector(".volume");let c=document.querySelector(".currTime");const d=document.querySelector(".totalTime"),o=document.querySelector(".music-gif");s.setAttribute("src",e[t].songSrc);let l=s.play();void 0!==l&&l.then((()=>{s.play()})).catch((e=>{})),o.setAttribute("src","/dist/icons-and-images/music.gif"),a.addEventListener("click",(()=>{s.paused?(s.play(),i.src="/dist/icons-and-images/pause-svgrepo-com.svg",o.setAttribute("src","/dist/icons-and-images/music.gif")):(s.pause(),i.src="/dist/icons-and-images/play-svgrepo-com.svg",o.setAttribute("src",""))}));const m=document.querySelector(".musicBar");s.addEventListener("timeupdate",(()=>{let e=s.currentTime/s.duration*100;m.value=e;let t=Math.floor(s.currentTime/60),n=Math.floor(s.currentTime%60),a="",i="";t/10==0&&(a="0"),0==Math.floor(n/10)&&(i="0"),c.textContent=a+t+":"+i+n;let r=Math.floor(s.duration/60),o=Math.floor(s.duration%60),l="",u="";r/10==0&&(l="0"),0==Math.floor(o/10)&&(u="0"),0==Number.isNaN(r)?d.textContent=l+r+":"+u+o:d.textContent="00:00"})),m.addEventListener("click",(e=>{s.currentTime=e.offsetX/e.srcElement.clientWidth*s.duration}));const u=document.querySelector(".prevBtn");document.querySelector(".nextBtn").addEventListener("click",(()=>{s.paused&&(i.src="/dist/icons-and-images/pause-svgrepo-com.svg"),t==e.length-1?t=0:t++,n(t),s.setAttribute("src",e[t].songSrc);let a=s.play();void 0!==a&&a.then((()=>{s.play()})).catch((e=>{}))})),u.addEventListener("click",(()=>{s.paused&&(i.src="/dist/icons-and-images/pause-svgrepo-com.svg"),0==t?t=e.length-1:t--,n(t),s.setAttribute("src",e[t].songSrc);let a=s.play();void 0!==a&&a.then((()=>{s.play()})).catch((e=>{}))})),r.addEventListener("click",(e=>{s.volume=e.offsetX/e.srcElement.clientWidth}))},a=()=>{const i=document.querySelector(".main");for(;i.hasChildNodes();)i.removeChild(i.firstChild);const r=(()=>{const e=document.createElement("div");return e.classList="songCards",e})();let c=3;for(;c<6;){const n=e[c].imageSrc,s=e[c].name,a=e[c].artist,i=t(n,s,a);r.appendChild(i),c++}const d=(e=>{const t=document.createElement("img");return t.setAttribute("class","content-img"),t.src="",t})(),o=(()=>{const e=document.createElement("div");return e.classList="lyrics",e})(),l=(()=>{const e=document.createElement("div");return e.classList="mediaPlayer",e.appendChild((()=>{let e=document.createElement("audio");return e.classList="audioElement",e.src="",e})()),e.appendChild((()=>{const e=document.createElement("div");e.classList="songDetail";const t=document.createElement("img"),n=document.createElement("div");let s=document.createElement("div"),a=document.createElement("div");return s.classList="currTime",a.classList="totalTime",t.classList="music-gif",n.classList="duration",n.appendChild(s),n.appendChild(a),t.src="",e.appendChild(t),e.appendChild(n),e})()),e.appendChild((()=>{const e=document.createElement("input");return e.setAttribute("type","range"),e.classList="musicBar",e.value=0,e})()),e.appendChild((()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),a=document.createElement("input");a.value=100;const i=document.createElement("img"),r=document.createElement("img"),c=document.createElement("img");return i.src="/dist/icons-and-images/previous-svgrepo-com.svg",r.src="/dist/icons-and-images/next-svgrepo-com.svg",c.src="/dist/icons-and-images/pause-svgrepo-com.svg",c.classList.add("playBtnImg","control-img"),r.classList.add("nextBtnImg","control-img"),i.classList.add("prevBtnImg","control-img"),t.classList.add("prevBtn","controlBtn"),s.classList.add("playBtn","controlBtn"),n.classList.add("nextBtn","controlBtn"),t.appendChild(i),s.appendChild(c),n.appendChild(r),a.setAttribute("type","range"),a.classList="volume",e.classList="controls",e.appendChild(t),e.appendChild(s),e.appendChild(n),e.appendChild(a),e})()),e})();i.appendChild(d),i.appendChild(o),i.appendChild(r),i.appendChild(l),document.querySelector(".songCards").addEventListener("click",(t=>{if("cards"==t.target.parentElement.className){const i=t.target.parentElement.children[1].textContent;let r;for(let t=0;t<e.length;t++)e[t].name==i&&(r=t);a(),n(r),s(r)}}))},i=t=>{if("cards"==t.target.parentElement.className){const i=t.target.parentElement.children[1].textContent;let r;for(let t=0;t<e.length;t++)e[t].name==i&&(r=t);a(),n(r),s(r)}},r=()=>{document.querySelector(".music-cards").addEventListener("click",i),(()=>{const t=document.querySelector(".search-bar");let n=document.createElement("div");n.classList="resultBox";const s=document.querySelector(".main");t.addEventListener("input",(t=>{let a=t.target.value;for(a=a.toLowerCase();n.firstChild;)n.removeChild(n.firstChild);for(let t=0;t<e.length;t++){let i=e[t].name;if(i=i.toLowerCase(),i.includes(a)){let a=document.createElement("div");a.classList="matchedStr",a.textContent=e[t].name,a.textContent+=e[t].artist,n.appendChild(a),s.appendChild(n)}}}))})()},c=()=>{const n=document.querySelector(".main");for(;n.hasChildNodes();)n.removeChild(n.firstChild);const s=(()=>{const e=document.createElement("div");return e.classList="music-cards",e})();let a=0;for(;a<3;){const n=e[a].imageSrc,i=e[a].name,r=e[a].artist,c=t(n,i,r);s.appendChild(c),a++}const i=(()=>{const e=document.createElement("div");return e.classList="list-head",e.textContent="Play music",e})(),c=(()=>{const e=document.createElement("div");return e.classList="list-of-songs",e})();c.appendChild(i),c.appendChild(s);const d=(e=>{const t=document.createElement("img");return t.setAttribute("class","content-img"),t.src="",t})(),o=(()=>{const e=document.createElement("div");return e.setAttribute("class","content-data"),e.textContent="Get ready to enjoy the experience!",e})(),l=(()=>{const e=document.createElement("input");return e.setAttribute("type","search"),e.classList="search-bar",e})();n.appendChild(d),n.appendChild(o),n.appendChild(l),n.appendChild(c),r()};(()=>{c();const e=document.querySelector(".home-btn"),t=document.querySelector(".music-list-btn");e.addEventListener("click",c),t.addEventListener("click",a)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUtGLFlBQVl5RixHQUVqQixLQ3hGZ0IsTUFDaEIsSUFFQSxNQUFNTyxFQUFVekcsU0FBU1ksY0FBYyxhQUNqQ3lELEVBQWNyRSxTQUFTWSxjQUFjLG1CQUczQzZGLEVBQVF4RSxpQkFBaUIsUUFBUyxHQUNsQ29DLEVBQVlwQyxpQkFBaUIsUUFBUyxJQ1QxQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvU29uZ3NMaXN0L3NvbmdzRGF0YS5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvbW9kdWxlcy9GdW5jdGlvbmFsaXRpZXMvbWFrZU11c2ljQ2FyZHMuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvRnVuY3Rpb25hbGl0aWVzL2J1aWxkQ3VycmVudE11c2ljQ2FyZC5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvbW9kdWxlcy9GdW5jdGlvbmFsaXRpZXMvcGxheU11c2ljLmpzIiwid2VicGFjazovL211c2ljLXBsYXllci8uL3NyYy9tb2R1bGVzL211c2ljUGFnZS5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvbW9kdWxlcy9GdW5jdGlvbmFsaXRpZXMvYnVpbGRNdXNpY1BsYXllci5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvbW9kdWxlcy9Vc2VyIEludGVyZmFjZS9tdXNpY1BhZ2VVSS5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvbW9kdWxlcy9Vc2VyIEludGVyZmFjZS9ob21lVUkuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvRnVuY3Rpb25hbGl0aWVzL3NlYXJjaEJhci5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvbW9kdWxlcy9ob21lLmpzIiwid2VicGFjazovL211c2ljLXBsYXllci8uL3NyYy9tb2R1bGVzL3dlYnBhZ2UuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHNvbmdMaXN0ID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogXCJPbiAmIE9uXCIsXG4gICAgICAgIGFydGlzdDogXCJDYXJ0b29uIHggSEFWU1VOIHggV0FZT1VULCBmdC4gRGFuaWVsIExldmlcIixcbiAgICAgICAgaW1hZ2VTcmM6IFwiL2Rpc3Qvc29uZy1pbWFnZXMvb24mb24uanBnXCIsXG4gICAgICAgIHNvbmdTcmM6XG4gICAgICAgICAgICBcIi9kaXN0L3NhbXBsZS1zb25ncy9DYXJ0b29uIC0gT24gJiBPbiAoZnQuIERhbmllbCBMZXZpKShDYXJ0b29uIHggSEFWU1VOIHggV0FZT1VUIFJlbWl4KSBbTkNTIFJlbGVhc2VdLm1wM1wiLFxuICAgICAgICBkdXJhdGlvbjogXCIwMzo1OFwiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIk1vcnRhbHNcIixcbiAgICAgICAgYXJ0aXN0OiBcIldhcnJpeW8sIGZlYXQuIExhdXJhIEJyZWhtXCIsXG4gICAgICAgIGltYWdlU3JjOiBcIi9kaXN0L3NvbmctaW1hZ2VzL3dhcnJpeW8uanBnXCIsXG4gICAgICAgIHNvbmdTcmM6XG4gICAgICAgICAgICBcIi9kaXN0L3NhbXBsZS1zb25ncy9XYXJyaXlvIC0gTW9ydGFscyAoZmVhdC4gTGF1cmEgQnJlaG0pIFtOQ1MgUmVsZWFzZV0ubXAzXCIsXG4gICAgICAgIGR1cmF0aW9uOiBcIjAzOjQ4XCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQ3JhZGxlc1wiLFxuICAgICAgICBhcnRpc3Q6IFwiU3ViIFVyYmFuXCIsXG4gICAgICAgIGltYWdlU3JjOiBcIi9kaXN0L3NvbmctaW1hZ2VzL2NyYWRsZXMuanBnXCIsXG4gICAgICAgIHNvbmdTcmM6IFwiL2Rpc3Qvc2FtcGxlLXNvbmdzL1N1YiBVcmJhbiAtIENyYWRsZXMgW05DUyBSZWxlYXNlXS5tcDNcIixcbiAgICAgICAgZHVyYXRpb246IFwiMDM6MjlcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJBZHZlbnR1cmVzXCIsXG4gICAgICAgIGFydGlzdDogXCJXaWxsaWFtIEVraCwgZmVhdC4gQWxleGEgTHVzYWRlclwiLFxuICAgICAgICBpbWFnZVNyYzogXCIvZGlzdC9zb25nLWltYWdlcy9hZHZlbnR1cmVzLmpwZ1wiLFxuICAgICAgICBzb25nU3JjOlxuICAgICAgICAgICAgXCIvZGlzdC9zYW1wbGUtc29uZ3MvV2lsbGlhbSBFa2ggLSBBZHZlbnR1cmVzIChmZWF0LiBBbGV4YSBMdXNhZGVyKSBbTkNTIFJlbGVhc2VdLm1wM1wiLFxuICAgICAgICBkdXJhdGlvbjogXCIwMzoxMVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIlNldCBNZSBGcmVlXCIsXG4gICAgICAgIGFydGlzdDogXCJTaW1iYWkgJiBGcml6enkgVGhlIFN0cmVldHpcIixcbiAgICAgICAgaW1hZ2VTcmM6IFwiL2Rpc3Qvc29uZy1pbWFnZXMvc2V0bWVmcmVlLmpwZ1wiLFxuICAgICAgICBzb25nU3JjOlxuICAgICAgICAgICAgXCIvZGlzdC9zYW1wbGUtc29uZ3MvU2ltYmFpICYgRnJpenp5IFRoZSBTdHJlZXR6IC0gU2V0IE1lIEZyZWUgW05DUyBSZWxlYXNlXS5tcDNcIixcbiAgICAgICAgZHVyYXRpb246IFwiMDI6NDlcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJIZXJvZXMgVG9uaWdodFwiLFxuICAgICAgICBhcnRpc3Q6IFwiSmFuamksIGZ0LkpvaG5uaW5nXCIsXG4gICAgICAgIGltYWdlU3JjOiBcIi9kaXN0L3NvbmctaW1hZ2VzL2phbmppLmpwZ1wiLFxuICAgICAgICBzb25nU3JjOlxuICAgICAgICAgICAgXCIvZGlzdC9zYW1wbGUtc29uZ3MvSmFuamkgLSBIZXJvZXMgVG9uaWdodCAoZmVhdC4gSm9obm5pbmcpIFtOQ1MgUmVsZWFzZV0ubXAzXCIsXG4gICAgICAgIGR1cmF0aW9uOiBcIjAzOjI4XCIsXG4gICAgfSxcbl07XG5cbmV4cG9ydCBkZWZhdWx0IHNvbmdMaXN0O1xuIiwiY29uc3QgbWFrZU11c2ljQ2FyZHMgPSAoc291cmNlLCBuYW1lLCBhcnRpc3QpID0+IHtcbiAgICBjb25zdCBzb25nSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBzb25nSW1nLmNsYXNzTGlzdC5hZGQoXCJjYXJkLWltZ1wiKTtcbiAgICBzb25nSW1nLnNyYyA9IHNvdXJjZTtcblxuICAgIGNvbnN0IHNvbmdOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzb25nTmFtZS5jbGFzc0xpc3QuYWRkKFwibXVzaWMtbmFtZVwiKTtcbiAgICBzb25nTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG5cbiAgICBjb25zdCBhcnRpc3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBhcnRpc3ROYW1lLmNsYXNzTGlzdC5hZGQoXCJhcnRpc3QtbmFtZVwiKTtcbiAgICBhcnRpc3ROYW1lLnRleHRDb250ZW50ID0gYXJ0aXN0O1xuXG4gICAgY29uc3QgbWFpbkNhcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG1haW5DYXJkLmNsYXNzTGlzdC5hZGQoXCJjYXJkc1wiKTtcblxuICAgIG1haW5DYXJkLmFwcGVuZENoaWxkKHNvbmdJbWcpO1xuICAgIG1haW5DYXJkLmFwcGVuZENoaWxkKHNvbmdOYW1lKTtcbiAgICBtYWluQ2FyZC5hcHBlbmRDaGlsZChhcnRpc3ROYW1lKTtcblxuICAgIHJldHVybiBtYWluQ2FyZDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG1ha2VNdXNpY0NhcmRzO1xuIiwiaW1wb3J0IHNvbmdMaXN0IGZyb20gXCIuLi9Tb25nc0xpc3Qvc29uZ3NEYXRhXCI7XG5cbmNvbnN0IGJ1aWxkU29uZ0luZm8gPSAoaW5kZXgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkYXRhLmNsYXNzTGlzdCA9IFwic29uZ0RhdGFcIjtcblxuICAgIGNvbnN0IHNvbmdJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIHNvbmdJbWcuY2xhc3NMaXN0ID0gXCJtYWluSW1nXCI7XG4gICAgc29uZ0ltZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgc29uZ0xpc3RbaW5kZXhdLmltYWdlU3JjKTtcblxuICAgIGNvbnN0IHNvbmdOYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzb25nTmFtZS5jbGFzc0xpc3QgPSBcInNvbmdOYW1lXCI7XG4gICAgc29uZ05hbWUudGV4dENvbnRlbnQgPSBzb25nTGlzdFtpbmRleF0ubmFtZTtcblxuICAgIGNvbnN0IHNvbmdXcml0ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHNvbmdXcml0ZXIuY2xhc3NMaXN0ID0gXCJhcnRpc3RcIjtcbiAgICBzb25nV3JpdGVyLnRleHRDb250ZW50ID0gc29uZ0xpc3RbaW5kZXhdLmFydGlzdDtcblxuICAgIGRhdGEuYXBwZW5kQ2hpbGQoc29uZ0ltZyk7XG4gICAgZGF0YS5hcHBlbmRDaGlsZChzb25nTmFtZSk7XG4gICAgZGF0YS5hcHBlbmRDaGlsZChzb25nV3JpdGVyKTtcblxuICAgIHJldHVybiBkYXRhO1xufTtcblxuY29uc3QgZ2V0U29uZ0RldGFpbHMgPSAoaW5kZXgpID0+IHtcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluXCIpO1xuXG4gICAgaWYgKG1haW4ubGFzdENoaWxkLmNsYXNzTmFtZSA9PSBcInNvbmdEYXRhXCIpIHtcbiAgICAgICAgbWFpbi5yZW1vdmVDaGlsZChtYWluLmxhc3RDaGlsZCk7XG4gICAgfVxuICAgIG1haW4uYXBwZW5kQ2hpbGQoYnVpbGRTb25nSW5mbyhpbmRleCkpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0U29uZ0RldGFpbHM7XG4iLCJpbXBvcnQgc29uZ0xpc3QgZnJvbSBcIi4uL1NvbmdzTGlzdC9zb25nc0RhdGFcIjtcbmltcG9ydCBnZXRTb25nRGV0YWlscyBmcm9tIFwiLi9idWlsZEN1cnJlbnRNdXNpY0NhcmRcIjtcblxuY29uc3QgYWRkQ29udHJvbHNGdW5jdGlvbmFsaXR5ID0gKGluZGV4KSA9PiB7XG4gICAgbGV0IGN1cnJlbnRTb25nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5hdWRpb0VsZW1lbnRcIik7XG4gICAgbGV0IHBsYXlCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXlCdG5cIik7XG4gICAgbGV0IHBsYXlCdG5JbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBsYXlCdG5JbWdcIik7XG4gICAgY29uc3Qgdm9sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi52b2x1bWVcIik7XG4gICAgbGV0IGN1cnJUaW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyVGltZVwiKTtcbiAgICBjb25zdCB0b3RhbFRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvdGFsVGltZVwiKTtcbiAgICBjb25zdCBtdXNpY0dpZiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXVzaWMtZ2lmXCIpO1xuXG4gICAgY3VycmVudFNvbmcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNvbmdMaXN0W2luZGV4XS5zb25nU3JjKTtcblxuICAgIGxldCBwbGF5UHJvbWlzZSA9IGN1cnJlbnRTb25nLnBsYXkoKTtcblxuICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBsYXlQcm9taXNlXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY3VycmVudFNvbmcucGxheSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTtcbiAgICB9XG5cbiAgICBtdXNpY0dpZi5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL211c2ljLmdpZlwiKTtcblxuICAgIHBsYXlCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYgKGN1cnJlbnRTb25nLnBhdXNlZCkge1xuICAgICAgICAgICAgY3VycmVudFNvbmcucGxheSgpO1xuICAgICAgICAgICAgcGxheUJ0bkltZy5zcmMgPSBcIi9kaXN0L2ljb25zLWFuZC1pbWFnZXMvcGF1c2Utc3ZncmVwby1jb20uc3ZnXCI7XG4gICAgICAgICAgICBtdXNpY0dpZi5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL211c2ljLmdpZlwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGN1cnJlbnRTb25nLnBhdXNlKCk7XG4gICAgICAgICAgICBwbGF5QnRuSW1nLnNyYyA9IFwiL2Rpc3QvaWNvbnMtYW5kLWltYWdlcy9wbGF5LXN2Z3JlcG8tY29tLnN2Z1wiO1xuICAgICAgICAgICAgbXVzaWNHaWYuc2V0QXR0cmlidXRlKFwic3JjXCIsIFwiXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCBtdXNpY0JhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXVzaWNCYXJcIik7XG5cbiAgICBjdXJyZW50U29uZy5hZGRFdmVudExpc3RlbmVyKFwidGltZXVwZGF0ZVwiLCAoKSA9PiB7XG4gICAgICAgIC8vZ2V0IHZhbHVlIGluIHBlcmNlbnRcbiAgICAgICAgbGV0IHNvbmdQcm9ncmVzcyA9XG4gICAgICAgICAgICAoY3VycmVudFNvbmcuY3VycmVudFRpbWUgLyBjdXJyZW50U29uZy5kdXJhdGlvbikgKiAxMDA7XG5cbiAgICAgICAgbXVzaWNCYXIudmFsdWUgPSBzb25nUHJvZ3Jlc3M7XG5cbiAgICAgICAgbGV0IHRpbWVJbk1pbnMgPSBNYXRoLmZsb29yKGN1cnJlbnRTb25nLmN1cnJlbnRUaW1lIC8gNjApO1xuICAgICAgICBsZXQgdGltZUluU2VjID0gTWF0aC5mbG9vcihjdXJyZW50U29uZy5jdXJyZW50VGltZSAlIDYwKTtcblxuICAgICAgICBsZXQgYmVmTWluID0gXCJcIixcbiAgICAgICAgICAgIGJlZlNlYyA9IFwiXCI7XG4gICAgICAgIGlmICh0aW1lSW5NaW5zIC8gMTAgPT0gMCkge1xuICAgICAgICAgICAgYmVmTWluID0gXCIwXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE1hdGguZmxvb3IodGltZUluU2VjIC8gMTApID09IDApIHtcbiAgICAgICAgICAgIGJlZlNlYyA9IFwiMFwiO1xuICAgICAgICB9XG4gICAgICAgIGN1cnJUaW1lLnRleHRDb250ZW50ID0gYmVmTWluICsgdGltZUluTWlucyArIFwiOlwiICsgYmVmU2VjICsgdGltZUluU2VjO1xuXG4gICAgICAgIGxldCBpbk1pbnMgPSBNYXRoLmZsb29yKGN1cnJlbnRTb25nLmR1cmF0aW9uIC8gNjApO1xuICAgICAgICBsZXQgaW5TZWMgPSBNYXRoLmZsb29yKGN1cnJlbnRTb25nLmR1cmF0aW9uICUgNjApO1xuXG4gICAgICAgIGxldCBiZWZNaW5zID0gXCJcIixcbiAgICAgICAgICAgIGJlZlNlY3MgPSBcIlwiO1xuICAgICAgICBpZiAoaW5NaW5zIC8gMTAgPT0gMCkge1xuICAgICAgICAgICAgYmVmTWlucyA9IFwiMFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChNYXRoLmZsb29yKGluU2VjIC8gMTApID09IDApIHtcbiAgICAgICAgICAgIGJlZlNlY3MgPSBcIjBcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTnVtYmVyLmlzTmFOKGluTWlucykgPT0gZmFsc2UpXG4gICAgICAgICAgICB0b3RhbFRpbWUudGV4dENvbnRlbnQgPSBiZWZNaW5zICsgaW5NaW5zICsgXCI6XCIgKyBiZWZTZWNzICsgaW5TZWM7XG4gICAgICAgIGVsc2UgdG90YWxUaW1lLnRleHRDb250ZW50ID0gXCIwMDowMFwiO1xuICAgIH0pO1xuXG4gICAgbXVzaWNCYXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGN1cnJlbnRTb25nLmN1cnJlbnRUaW1lID1cbiAgICAgICAgICAgIChlLm9mZnNldFggLyBlLnNyY0VsZW1lbnQuY2xpZW50V2lkdGgpICogY3VycmVudFNvbmcuZHVyYXRpb247XG4gICAgfSk7XG5cbiAgICBjb25zdCBwcmV2QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcmV2QnRuXCIpO1xuICAgIGNvbnN0IG5leHRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5leHRCdG5cIik7XG5cbiAgICBuZXh0QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50U29uZy5wYXVzZWQpIHtcbiAgICAgICAgICAgIHBsYXlCdG5JbWcuc3JjID0gXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL3BhdXNlLXN2Z3JlcG8tY29tLnN2Z1wiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmRleCA9PSBzb25nTGlzdC5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIGdldFNvbmdEZXRhaWxzKGluZGV4KTtcbiAgICAgICAgY3VycmVudFNvbmcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNvbmdMaXN0W2luZGV4XS5zb25nU3JjKTtcblxuICAgICAgICBsZXQgcGxheVByb21pc2UgPSBjdXJyZW50U29uZy5wbGF5KCk7XG5cbiAgICAgICAgaWYgKHBsYXlQcm9taXNlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHBsYXlQcm9taXNlXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U29uZy5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7fSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHByZXZCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYgKGN1cnJlbnRTb25nLnBhdXNlZCkge1xuICAgICAgICAgICAgcGxheUJ0bkltZy5zcmMgPSBcIi9kaXN0L2ljb25zLWFuZC1pbWFnZXMvcGF1c2Utc3ZncmVwby1jb20uc3ZnXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4ID09IDApIHtcbiAgICAgICAgICAgIGluZGV4ID0gc29uZ0xpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U29uZ0RldGFpbHMoaW5kZXgpO1xuICAgICAgICBjdXJyZW50U29uZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgc29uZ0xpc3RbaW5kZXhdLnNvbmdTcmMpO1xuXG4gICAgICAgIGxldCBwbGF5UHJvbWlzZSA9IGN1cnJlbnRTb25nLnBsYXkoKTtcblxuICAgICAgICBpZiAocGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGxheVByb21pc2VcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTb25nLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgdm9sLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBjdXJyZW50U29uZy52b2x1bWUgPSBlLm9mZnNldFggLyBlLnNyY0VsZW1lbnQuY2xpZW50V2lkdGg7XG4gICAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBhZGRDb250cm9sc0Z1bmN0aW9uYWxpdHk7XG4iLCJpbXBvcnQgc29uZ0xpc3QgZnJvbSBcIi4vU29uZ3NMaXN0L3NvbmdzRGF0YVwiO1xuaW1wb3J0IG1ha2VNdXNpY0NhcmRzIGZyb20gXCIuL0Z1bmN0aW9uYWxpdGllcy9tYWtlTXVzaWNDYXJkc1wiO1xuaW1wb3J0IGJ1aWxkU29uZ0luZm8gZnJvbSBcIi4vRnVuY3Rpb25hbGl0aWVzL2J1aWxkQ3VycmVudE11c2ljQ2FyZC5qc1wiO1xuaW1wb3J0IGJ1aWxkUGxheWVyIGZyb20gXCIuL0Z1bmN0aW9uYWxpdGllcy9idWlsZE11c2ljUGxheWVyXCI7XG5pbXBvcnQgYWRkRnVuY3Rpb25hbGl0eVRvQ2FyZHNPbk11c2ljUGFnZSBmcm9tIFwiLi9Vc2VyIEludGVyZmFjZS9tdXNpY1BhZ2VVSVwiO1xuXG5jb25zdCBnZXRMeXJpY3MgPSAoKSA9PiB7XG4gICAgY29uc3QgbHlyaWNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBseXJpY3MuY2xhc3NMaXN0ID0gXCJseXJpY3NcIjtcblxuICAgIHJldHVybiBseXJpY3M7XG59O1xuXG5jb25zdCBhZGRDYXJkcyA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY2FyZHNDb250YWluZXIuY2xhc3NMaXN0ID0gXCJzb25nQ2FyZHNcIjtcblxuICAgIHJldHVybiBjYXJkc0NvbnRhaW5lcjtcbn07XG5cbmNvbnN0IGJ1aWxkQ29udGVudEltZyA9IChzb3VyY2UpID0+IHtcbiAgICBjb25zdCBob21lQmdJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIGhvbWVCZ0ltZy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbnRlbnQtaW1nXCIpO1xuICAgIGhvbWVCZ0ltZy5zcmMgPSBzb3VyY2U7XG5cbiAgICByZXR1cm4gaG9tZUJnSW1nO1xufTtcblxuY29uc3QgbG9hZE11c2ljUGFnZSA9ICgpID0+IHtcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluXCIpO1xuXG4gICAgd2hpbGUgKG1haW4uaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgIG1haW4ucmVtb3ZlQ2hpbGQobWFpbi5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICAvLyBob21lLWJhY2tncm91bmQgaW1hZ2Ugc3JjXG4gICAgY29uc3QgaWxsdXNTcmMgPSBcIlwiO1xuXG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBhZGRDYXJkcygpO1xuXG4gICAgbGV0IGluZGV4ID0gMztcbiAgICB3aGlsZSAoaW5kZXggPCA2KSB7XG4gICAgICAgIGNvbnN0IHNyYyA9IHNvbmdMaXN0W2luZGV4XS5pbWFnZVNyYztcbiAgICAgICAgY29uc3QgbmFtZSA9IHNvbmdMaXN0W2luZGV4XS5uYW1lO1xuICAgICAgICBjb25zdCBhcnRpc3QgPSBzb25nTGlzdFtpbmRleF0uYXJ0aXN0O1xuXG4gICAgICAgIGNvbnN0IGNhcmQgPSBtYWtlTXVzaWNDYXJkcyhzcmMsIG5hbWUsIGFydGlzdCwgaW5kZXggKyAxKTtcbiAgICAgICAgY2FyZHNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XG5cbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICBjb25zdCBiZ0ltYWdlID0gYnVpbGRDb250ZW50SW1nKGlsbHVzU3JjKTtcblxuICAgIGNvbnN0IGx5cmljcyA9IGdldEx5cmljcygpO1xuXG4gICAgY29uc3QgbXVzaWNQbGF5ZXIgPSBidWlsZFBsYXllcigpO1xuXG4gICAgbWFpbi5hcHBlbmRDaGlsZChiZ0ltYWdlKTtcbiAgICBtYWluLmFwcGVuZENoaWxkKGx5cmljcyk7XG4gICAgbWFpbi5hcHBlbmRDaGlsZChjYXJkc0NvbnRhaW5lcik7XG4gICAgbWFpbi5hcHBlbmRDaGlsZChtdXNpY1BsYXllcik7XG5cbiAgICBhZGRGdW5jdGlvbmFsaXR5VG9DYXJkc09uTXVzaWNQYWdlKCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2FkTXVzaWNQYWdlO1xuIiwiY29uc3QgYWRkQXVkaW9FbGVtZW50ID0gKCkgPT4ge1xuICAgIGxldCBhdWRpbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKTtcbiAgICBhdWRpby5jbGFzc0xpc3QgPSBcImF1ZGlvRWxlbWVudFwiO1xuICAgIGF1ZGlvLnNyYyA9IFwiXCI7XG5cbiAgICByZXR1cm4gYXVkaW87XG59O1xuXG5jb25zdCBhZGRNdXNpY1JhbmdlQmFyID0gKCkgPT4ge1xuICAgIGNvbnN0IHJhbmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIHJhbmdlLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJyYW5nZVwiKTtcbiAgICByYW5nZS5jbGFzc0xpc3QgPSBcIm11c2ljQmFyXCI7XG4gICAgcmFuZ2UudmFsdWUgPSAwO1xuXG4gICAgcmV0dXJuIHJhbmdlO1xufTtcblxuY29uc3QgYWRkU29uZ0luZm8gPSAoKSA9PiB7XG4gICAgY29uc3QgaW5mbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaW5mby5jbGFzc0xpc3QgPSBcInNvbmdEZXRhaWxcIjtcblxuICAgIGNvbnN0IGdpZiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgY29uc3QgZHVyYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgbGV0IGN1cnJUaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsZXQgdG90YWxUaW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGN1cnJUaW1lLmNsYXNzTGlzdCA9IFwiY3VyclRpbWVcIjtcbiAgICB0b3RhbFRpbWUuY2xhc3NMaXN0ID0gXCJ0b3RhbFRpbWVcIjtcblxuICAgIGdpZi5jbGFzc0xpc3QgPSBcIm11c2ljLWdpZlwiO1xuICAgIGR1cmF0aW9uLmNsYXNzTGlzdCA9IFwiZHVyYXRpb25cIjtcblxuICAgIGR1cmF0aW9uLmFwcGVuZENoaWxkKGN1cnJUaW1lKTtcbiAgICBkdXJhdGlvbi5hcHBlbmRDaGlsZCh0b3RhbFRpbWUpO1xuXG4gICAgLy9UT0RPIDogQWRkIGdpZiBzb3VyY2VcbiAgICBnaWYuc3JjID0gXCJcIjtcblxuICAgIGluZm8uYXBwZW5kQ2hpbGQoZ2lmKTtcbiAgICBpbmZvLmFwcGVuZENoaWxkKGR1cmF0aW9uKTtcblxuICAgIHJldHVybiBpbmZvO1xufTtcblxuY29uc3QgYWRkQ29udHJvbHMgPSAoKSA9PiB7XG4gICAgY29uc3QgY29udHJvbHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgY29uc3QgcHJldkJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgY29uc3QgcGxheUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBjb25zdCB2b2x1bWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgdm9sdW1lLnZhbHVlID0gMTAwO1xuXG4gICAgY29uc3QgcHJldkJ0bkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgY29uc3QgbmV4dEJ0bkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgY29uc3QgcGxheUJ0bkltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG5cbiAgICBwcmV2QnRuSW1nLnNyYyA9IFwiL2Rpc3QvaWNvbnMtYW5kLWltYWdlcy9wcmV2aW91cy1zdmdyZXBvLWNvbS5zdmdcIjtcbiAgICBuZXh0QnRuSW1nLnNyYyA9IFwiL2Rpc3QvaWNvbnMtYW5kLWltYWdlcy9uZXh0LXN2Z3JlcG8tY29tLnN2Z1wiO1xuICAgIHBsYXlCdG5JbWcuc3JjID0gXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL3BhdXNlLXN2Z3JlcG8tY29tLnN2Z1wiO1xuXG4gICAgcGxheUJ0bkltZy5jbGFzc0xpc3QuYWRkKFwicGxheUJ0bkltZ1wiLCBcImNvbnRyb2wtaW1nXCIpO1xuICAgIG5leHRCdG5JbWcuY2xhc3NMaXN0LmFkZChcIm5leHRCdG5JbWdcIiwgXCJjb250cm9sLWltZ1wiKTtcbiAgICBwcmV2QnRuSW1nLmNsYXNzTGlzdC5hZGQoXCJwcmV2QnRuSW1nXCIsIFwiY29udHJvbC1pbWdcIik7XG5cbiAgICBwcmV2QnRuLmNsYXNzTGlzdC5hZGQoXCJwcmV2QnRuXCIsIFwiY29udHJvbEJ0blwiKTtcbiAgICBwbGF5QnRuLmNsYXNzTGlzdC5hZGQoXCJwbGF5QnRuXCIsIFwiY29udHJvbEJ0blwiKTtcbiAgICBuZXh0QnRuLmNsYXNzTGlzdC5hZGQoXCJuZXh0QnRuXCIsIFwiY29udHJvbEJ0blwiKTtcblxuICAgIHByZXZCdG4uYXBwZW5kQ2hpbGQocHJldkJ0bkltZyk7XG4gICAgcGxheUJ0bi5hcHBlbmRDaGlsZChwbGF5QnRuSW1nKTtcbiAgICBuZXh0QnRuLmFwcGVuZENoaWxkKG5leHRCdG5JbWcpO1xuXG4gICAgdm9sdW1lLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJyYW5nZVwiKTtcbiAgICB2b2x1bWUuY2xhc3NMaXN0ID0gXCJ2b2x1bWVcIjtcblxuICAgIGNvbnRyb2xzLmNsYXNzTGlzdCA9IFwiY29udHJvbHNcIjtcblxuICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKHByZXZCdG4pO1xuICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKHBsYXlCdG4pO1xuICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKG5leHRCdG4pO1xuICAgIGNvbnRyb2xzLmFwcGVuZENoaWxkKHZvbHVtZSk7XG5cbiAgICByZXR1cm4gY29udHJvbHM7XG59O1xuXG5jb25zdCBidWlsZFBsYXllciA9ICgpID0+IHtcbiAgICBjb25zdCBtZWRpYVBsYXllciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbWVkaWFQbGF5ZXIuY2xhc3NMaXN0ID0gXCJtZWRpYVBsYXllclwiO1xuXG4gICAgbWVkaWFQbGF5ZXIuYXBwZW5kQ2hpbGQoYWRkQXVkaW9FbGVtZW50KCkpO1xuICAgIG1lZGlhUGxheWVyLmFwcGVuZENoaWxkKGFkZFNvbmdJbmZvKCkpO1xuICAgIG1lZGlhUGxheWVyLmFwcGVuZENoaWxkKGFkZE11c2ljUmFuZ2VCYXIoKSk7XG4gICAgbWVkaWFQbGF5ZXIuYXBwZW5kQ2hpbGQoYWRkQ29udHJvbHMoKSk7XG5cbiAgICByZXR1cm4gbWVkaWFQbGF5ZXI7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBidWlsZFBsYXllcjtcbiIsImltcG9ydCBzb25nTGlzdCBmcm9tIFwiLi4vU29uZ3NMaXN0L3NvbmdzRGF0YVwiO1xuaW1wb3J0IGFkZENvbnRyb2xzRnVuY3Rpb25hbGl0eSBmcm9tIFwiLi4vRnVuY3Rpb25hbGl0aWVzL3BsYXlNdXNpY1wiO1xuaW1wb3J0IGdldFNvbmdEZXRhaWxzIGZyb20gXCIuLi9GdW5jdGlvbmFsaXRpZXMvYnVpbGRDdXJyZW50TXVzaWNDYXJkXCI7XG5pbXBvcnQgbG9hZE11c2ljUGFnZSBmcm9tIFwiLi4vbXVzaWNQYWdlXCI7XG5cbmNvbnN0IGFkZEZ1bmN0aW9uYWxpdHlUb0NhcmRzT25NdXNpY1BhZ2UgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FyZHNQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNvbmdDYXJkc1wiKTtcblxuICAgIGNhcmRzUGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQucGFyZW50RWxlbWVudC5jbGFzc05hbWUgPT0gXCJjYXJkc1wiKSB7XG4gICAgICAgICAgICBjb25zdCBzb25nTmFtZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XG5cbiAgICAgICAgICAgIGxldCBzb25nSW5kZXg7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvbmdMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHNvbmdMaXN0W2ldLm5hbWUgPT0gc29uZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgc29uZ0luZGV4ID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2FkTXVzaWNQYWdlKCk7XG4gICAgICAgICAgICBnZXRTb25nRGV0YWlscyhzb25nSW5kZXgpO1xuICAgICAgICAgICAgYWRkQ29udHJvbHNGdW5jdGlvbmFsaXR5KHNvbmdJbmRleCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFkZEZ1bmN0aW9uYWxpdHlUb0NhcmRzT25NdXNpY1BhZ2U7XG4iLCJpbXBvcnQgbG9hZE11c2ljUGFnZSBmcm9tIFwiLi4vbXVzaWNQYWdlXCI7XG5pbXBvcnQgc29uZ0xpc3QgZnJvbSBcIi4uL1NvbmdzTGlzdC9zb25nc0RhdGFcIjtcbmltcG9ydCBhZGRDb250cm9sc0Z1bmN0aW9uYWxpdHkgZnJvbSBcIi4uL0Z1bmN0aW9uYWxpdGllcy9wbGF5TXVzaWNcIjtcbmltcG9ydCBnZXRTb25nRGV0YWlscyBmcm9tIFwiLi4vRnVuY3Rpb25hbGl0aWVzL2J1aWxkQ3VycmVudE11c2ljQ2FyZFwiO1xuaW1wb3J0IGdldFNlYXJjaERhdGEgZnJvbSBcIi4uL0Z1bmN0aW9uYWxpdGllcy9zZWFyY2hCYXJcIjtcblxuY29uc3QgZ2V0Q2xpY2tlZCA9IChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2xhc3NOYW1lID09IFwiY2FyZHNcIikge1xuICAgICAgICBjb25zdCBzb25nTmFtZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMV0udGV4dENvbnRlbnQ7XG5cbiAgICAgICAgbGV0IHNvbmdJbmRleDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzb25nTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHNvbmdMaXN0W2ldLm5hbWUgPT0gc29uZ05hbWUpIHtcbiAgICAgICAgICAgICAgICBzb25nSW5kZXggPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbG9hZE11c2ljUGFnZSgpO1xuICAgICAgICBnZXRTb25nRGV0YWlscyhzb25nSW5kZXgpO1xuICAgICAgICBhZGRDb250cm9sc0Z1bmN0aW9uYWxpdHkoc29uZ0luZGV4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufTtcblxuY29uc3QgYWRkRnVuY3Rpb25hbGl0eVRvSG9tZUVsZW1lbnRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhcmRzUGFyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tdXNpYy1jYXJkc1wiKTtcblxuICAgIGNhcmRzUGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBnZXRDbGlja2VkKTtcblxuICAgIGdldFNlYXJjaERhdGEoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFkZEZ1bmN0aW9uYWxpdHlUb0hvbWVFbGVtZW50cztcbiIsImltcG9ydCBzb25nTGlzdCBmcm9tIFwiLi4vU29uZ3NMaXN0L3NvbmdzRGF0YVwiO1xuXG5jb25zdCBnZXRTZWFyY2hEYXRhID0gKCkgPT4ge1xuICAgIGNvbnN0IHNlYXJjaEJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2VhcmNoLWJhclwiKTtcblxuICAgIGxldCBzZWFyY2hSZXN1bHRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBzZWFyY2hSZXN1bHRzLmNsYXNzTGlzdCA9IFwicmVzdWx0Qm94XCI7XG5cbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluXCIpO1xuXG4gICAgc2VhcmNoQmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICBsZXQgaW5wdXRCeVVzZXIgPSBlLnRhcmdldC52YWx1ZTtcbiAgICAgICAgaW5wdXRCeVVzZXIgPSBpbnB1dEJ5VXNlci50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHdoaWxlIChzZWFyY2hSZXN1bHRzLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgICAgIHNlYXJjaFJlc3VsdHMucmVtb3ZlQ2hpbGQoc2VhcmNoUmVzdWx0cy5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzb25nTGlzdC5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIGxldCBnZXROYW1lID0gc29uZ0xpc3RbaW5kZXhdLm5hbWU7XG4gICAgICAgICAgICBnZXROYW1lID0gZ2V0TmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgICAgICBpZiAoZ2V0TmFtZS5pbmNsdWRlcyhpbnB1dEJ5VXNlcikpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWF0Y2hlZFN0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgbWF0Y2hlZFN0ci5jbGFzc0xpc3QgPSBcIm1hdGNoZWRTdHJcIjtcblxuICAgICAgICAgICAgICAgIG1hdGNoZWRTdHIudGV4dENvbnRlbnQgPSBzb25nTGlzdFtpbmRleF0ubmFtZTtcbiAgICAgICAgICAgICAgICBtYXRjaGVkU3RyLnRleHRDb250ZW50ICs9IHNvbmdMaXN0W2luZGV4XS5hcnRpc3Q7XG5cbiAgICAgICAgICAgICAgICBzZWFyY2hSZXN1bHRzLmFwcGVuZENoaWxkKG1hdGNoZWRTdHIpO1xuXG4gICAgICAgICAgICAgICAgbWFpbi5hcHBlbmRDaGlsZChzZWFyY2hSZXN1bHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0U2VhcmNoRGF0YTtcbiIsImltcG9ydCBzb25nTGlzdCBmcm9tIFwiLi9Tb25nc0xpc3Qvc29uZ3NEYXRhXCI7XG5pbXBvcnQgbWFrZU11c2ljQ2FyZHMgZnJvbSBcIi4vRnVuY3Rpb25hbGl0aWVzL21ha2VNdXNpY0NhcmRzXCI7XG5pbXBvcnQgYWRkRnVuY3Rpb25hbGl0eVRvSG9tZUVsZW1lbnRzIGZyb20gXCIuL1VzZXIgSW50ZXJmYWNlL2hvbWVVSVwiO1xuXG5jb25zdCBidWlsZENvbnRlbnRJbWcgPSAoc291cmNlKSA9PiB7XG4gICAgY29uc3QgaG9tZUJnSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBob21lQmdJbWcuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJjb250ZW50LWltZ1wiKTtcbiAgICBob21lQmdJbWcuc3JjID0gc291cmNlO1xuXG4gICAgcmV0dXJuIGhvbWVCZ0ltZztcbn07XG5cbmNvbnN0IGJ1aWxkQ29udGVudCA9ICgpID0+IHtcbiAgICBjb25zdCBkYXRhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkYXRhLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29udGVudC1kYXRhXCIpO1xuICAgIGRhdGEudGV4dENvbnRlbnQgPSBcIkdldCByZWFkeSB0byBlbmpveSB0aGUgZXhwZXJpZW5jZSFcIjtcblxuICAgIHJldHVybiBkYXRhO1xufTtcblxuY29uc3QgZ2V0U29uZ3NMaXN0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGxpc3QuY2xhc3NMaXN0ID0gXCJsaXN0LW9mLXNvbmdzXCI7XG5cbiAgICByZXR1cm4gbGlzdDtcbn07XG5cbmNvbnN0IGFkZEhlYWQgPSAoKSA9PiB7XG4gICAgY29uc3QgaGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaGVhZC5jbGFzc0xpc3QgPSBcImxpc3QtaGVhZFwiO1xuICAgIGhlYWQudGV4dENvbnRlbnQgPSBcIlBsYXkgbXVzaWNcIjtcblxuICAgIHJldHVybiBoZWFkO1xufTtcblxuY29uc3QgYWRkQ2FyZHMgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNhcmRzQ29udGFpbmVyLmNsYXNzTGlzdCA9IFwibXVzaWMtY2FyZHNcIjtcblxuICAgIHJldHVybiBjYXJkc0NvbnRhaW5lcjtcbn07XG5cbmNvbnN0IGFkZFNlYXJjaEJhciA9ICgpID0+IHtcbiAgICBjb25zdCBiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgYmFyLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJzZWFyY2hcIik7XG4gICAgYmFyLmNsYXNzTGlzdCA9IFwic2VhcmNoLWJhclwiO1xuXG4gICAgcmV0dXJuIGJhcjtcbn07XG5cbmNvbnN0IGxvYWRIb21lID0gKCkgPT4ge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5cIik7XG5cbiAgICB3aGlsZSAobWFpbi5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgbWFpbi5yZW1vdmVDaGlsZChtYWluLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIGhvbWUtYmFja2dyb3VuZCBpbWFnZSBzcmNcbiAgICBjb25zdCBpbGx1c1NyYyA9IFwiXCI7XG5cbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGFkZENhcmRzKCk7XG5cbiAgICAvLyBzb25nJ3MgaW1hZ2UgYW5kIG5hbWVcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIHdoaWxlIChpbmRleCA8IDMpIHtcbiAgICAgICAgY29uc3Qgc3JjID0gc29uZ0xpc3RbaW5kZXhdLmltYWdlU3JjO1xuICAgICAgICBjb25zdCBuYW1lID0gc29uZ0xpc3RbaW5kZXhdLm5hbWU7XG4gICAgICAgIGNvbnN0IGFydGlzdCA9IHNvbmdMaXN0W2luZGV4XS5hcnRpc3Q7XG5cbiAgICAgICAgY29uc3QgY2FyZCA9IG1ha2VNdXNpY0NhcmRzKHNyYywgbmFtZSwgYXJ0aXN0LCBpbmRleCArIDEpO1xuICAgICAgICBjYXJkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcblxuICAgICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIGNvbnN0IGxpc3RIZWFkID0gYWRkSGVhZCgpO1xuXG4gICAgY29uc3Qgc29uZ3NMaXN0ID0gZ2V0U29uZ3NMaXN0KCk7XG4gICAgc29uZ3NMaXN0LmFwcGVuZENoaWxkKGxpc3RIZWFkKTtcbiAgICBzb25nc0xpc3QuYXBwZW5kQ2hpbGQoY2FyZHNDb250YWluZXIpO1xuXG4gICAgY29uc3QgYmdJbWFnZSA9IGJ1aWxkQ29udGVudEltZyhpbGx1c1NyYyk7XG4gICAgY29uc3QgaG9tZU1zZyA9IGJ1aWxkQ29udGVudCgpO1xuXG4gICAgY29uc3Qgc2VhcmNoQmFyID0gYWRkU2VhcmNoQmFyKCk7XG5cbiAgICBtYWluLmFwcGVuZENoaWxkKGJnSW1hZ2UpO1xuICAgIG1haW4uYXBwZW5kQ2hpbGQoaG9tZU1zZyk7XG4gICAgbWFpbi5hcHBlbmRDaGlsZChzZWFyY2hCYXIpO1xuICAgIG1haW4uYXBwZW5kQ2hpbGQoc29uZ3NMaXN0KTtcblxuICAgIGFkZEZ1bmN0aW9uYWxpdHlUb0hvbWVFbGVtZW50cygpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9hZEhvbWU7XG4iLCJpbXBvcnQgbG9hZEhvbWUgZnJvbSBcIi4vaG9tZVwiO1xuaW1wb3J0IGxvYWRNdXNpY1BhZ2UgZnJvbSBcIi4vbXVzaWNQYWdlXCI7XG5cbmNvbnN0IGxvYWRXZWJwYWdlID0gKCkgPT4ge1xuICAgIGxvYWRIb21lKCk7XG5cbiAgICBjb25zdCBob21lQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob21lLWJ0blwiKTtcbiAgICBjb25zdCBtZWRpYVBsYXllciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubXVzaWMtbGlzdC1idG5cIik7XG4gICAgLy9jb25zdCBwbGF5bGlzdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJwbGF5bGlzdC1idG5cIik7XG5cbiAgICBob21lQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBsb2FkSG9tZSk7XG4gICAgbWVkaWFQbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxvYWRNdXNpY1BhZ2UpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9hZFdlYnBhZ2U7XG4iLCJpbXBvcnQgbG9hZFdlYnBhZ2UgZnJvbSBcIi4vbW9kdWxlcy93ZWJwYWdlXCI7XG5cbmxvYWRXZWJwYWdlKCk7XG4iXSwibmFtZXMiOlsibmFtZSIsImFydGlzdCIsImltYWdlU3JjIiwic29uZ1NyYyIsImR1cmF0aW9uIiwic291cmNlIiwic29uZ0ltZyIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsInNyYyIsInNvbmdOYW1lIiwidGV4dENvbnRlbnQiLCJhcnRpc3ROYW1lIiwibWFpbkNhcmQiLCJhcHBlbmRDaGlsZCIsImluZGV4IiwibWFpbiIsInF1ZXJ5U2VsZWN0b3IiLCJsYXN0Q2hpbGQiLCJjbGFzc05hbWUiLCJyZW1vdmVDaGlsZCIsImRhdGEiLCJzZXRBdHRyaWJ1dGUiLCJzb25nV3JpdGVyIiwiYnVpbGRTb25nSW5mbyIsImN1cnJlbnRTb25nIiwicGxheUJ0biIsInBsYXlCdG5JbWciLCJ2b2wiLCJjdXJyVGltZSIsInRvdGFsVGltZSIsIm11c2ljR2lmIiwicGxheVByb21pc2UiLCJwbGF5IiwidW5kZWZpbmVkIiwidGhlbiIsImNhdGNoIiwiZXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwicGF1c2VkIiwicGF1c2UiLCJtdXNpY0JhciIsInNvbmdQcm9ncmVzcyIsImN1cnJlbnRUaW1lIiwidmFsdWUiLCJ0aW1lSW5NaW5zIiwiTWF0aCIsImZsb29yIiwidGltZUluU2VjIiwiYmVmTWluIiwiYmVmU2VjIiwiaW5NaW5zIiwiaW5TZWMiLCJiZWZNaW5zIiwiYmVmU2VjcyIsIk51bWJlciIsImlzTmFOIiwiZSIsIm9mZnNldFgiLCJzcmNFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJwcmV2QnRuIiwidm9sdW1lIiwiaGFzQ2hpbGROb2RlcyIsImZpcnN0Q2hpbGQiLCJjYXJkc0NvbnRhaW5lciIsImFkZENhcmRzIiwiY2FyZCIsImJnSW1hZ2UiLCJob21lQmdJbWciLCJidWlsZENvbnRlbnRJbWciLCJseXJpY3MiLCJnZXRMeXJpY3MiLCJtdXNpY1BsYXllciIsIm1lZGlhUGxheWVyIiwiYXVkaW8iLCJhZGRBdWRpb0VsZW1lbnQiLCJpbmZvIiwiZ2lmIiwiYWRkU29uZ0luZm8iLCJyYW5nZSIsImFkZE11c2ljUmFuZ2VCYXIiLCJjb250cm9scyIsIm5leHRCdG4iLCJwcmV2QnRuSW1nIiwibmV4dEJ0bkltZyIsImFkZENvbnRyb2xzIiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImNoaWxkcmVuIiwic29uZ0luZGV4IiwiaSIsImdldENsaWNrZWQiLCJzZWFyY2hCYXIiLCJzZWFyY2hSZXN1bHRzIiwiaW5wdXRCeVVzZXIiLCJ0b0xvd2VyQ2FzZSIsImdldE5hbWUiLCJpbmNsdWRlcyIsIm1hdGNoZWRTdHIiLCJsaXN0SGVhZCIsImhlYWQiLCJhZGRIZWFkIiwic29uZ3NMaXN0IiwibGlzdCIsImdldFNvbmdzTGlzdCIsImhvbWVNc2ciLCJidWlsZENvbnRlbnQiLCJiYXIiLCJhZGRTZWFyY2hCYXIiLCJob21lQnRuIl0sInNvdXJjZVJvb3QiOiIifQ==