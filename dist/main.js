(()=>{"use strict";const e=[{name:"On & On",artist:"Cartoon x HAVSUN x WAYOUT, ft. Daniel Levi",imageSrc:"/dist/song-images/on&on.jpg",songSrc:"/dist/sample-songs/Cartoon - On & On (ft. Daniel Levi)(Cartoon x HAVSUN x WAYOUT Remix) [NCS Release].mp3",duration:"03:58"},{name:"Mortals",artist:"Warriyo, feat. Laura Brehm",imageSrc:"/dist/song-images/warriyo.jpg",songSrc:"/dist/sample-songs/Warriyo - Mortals (feat. Laura Brehm) [NCS Release].mp3",duration:"03:48"},{name:"Cradles",artist:"Sub Urban",imageSrc:"/dist/song-images/cradles.jpg",songSrc:"/dist/sample-songs/Sub Urban - Cradles [NCS Release].mp3",duration:"03:29"},{name:"Adventures",artist:"William Ekh, feat. Alexa Lusader",imageSrc:"/dist/song-images/adventures.jpg",songSrc:"/dist/sample-songs/William Ekh - Adventures (feat. Alexa Lusader) [NCS Release].mp3",duration:"03:11"},{name:"Set Me Free",artist:"Simbai & Frizzy The Streetz",imageSrc:"/dist/song-images/setmefree.jpg",songSrc:"/dist/sample-songs/Simbai & Frizzy The Streetz - Set Me Free [NCS Release].mp3",duration:"02:49"},{name:"Heroes Tonight",artist:"Janji, ft.Johnning",imageSrc:"/dist/song-images/janji.jpg",songSrc:"/dist/sample-songs/Janji - Heroes Tonight (feat. Johnning) [NCS Release].mp3",duration:"03:28"}],t=(e,t,n)=>{const s=document.createElement("img");s.classList.add("card-img"),s.src=e;const a=document.createElement("div");a.classList.add("music-name"),a.textContent=t;const c=document.createElement("div");c.classList.add("artist-name"),c.textContent=n;const r=document.createElement("div");return r.classList.add("cards"),r.appendChild(s),r.appendChild(a),r.appendChild(c),r},n=t=>{const n=document.querySelector(".main");"songData"==n.lastChild.className&&n.removeChild(n.lastChild),n.appendChild((t=>{const n=document.createElement("div");n.classList="songData";const s=document.createElement("img");s.classList="mainImg",s.setAttribute("src",e[t].imageSrc);const a=document.createElement("div");a.classList="songName",a.textContent=e[t].name;const c=document.createElement("div");return c.classList="artist",c.textContent=e[t].artist,n.appendChild(s),n.appendChild(a),n.appendChild(c),n})(t))},s=t=>{let s=document.querySelector(".audioElement"),a=document.querySelector(".playBtn"),c=document.querySelector(".playBtnImg");const r=document.querySelector(".volume");let i=document.querySelector(".currTime");const d=document.querySelector(".totalTime");s.setAttribute("src",e[t].songSrc);let o=s.play();void 0!==o&&o.then((()=>{s.play()})).catch((e=>{})),a.addEventListener("click",(()=>{s.paused?(s.play(),c.src="/dist/icons-and-images/pause-svgrepo-com.svg"):(s.pause(),c.src="/dist/icons-and-images/play-svgrepo-com.svg")}));const l=document.querySelector(".musicBar");s.addEventListener("timeupdate",(()=>{let e=s.currentTime/s.duration*100;l.value=e;let t=Math.floor(s.currentTime/60),n=Math.floor(s.currentTime%60),a="",c="";t/10==0&&(a="0"),0==Math.floor(n/10)&&(c="0"),i.textContent=a+t+":"+c+n;let r=Math.floor(s.duration/60),o=Math.floor(s.duration%60),m="",u="";r/10==0&&(m="0"),0==Math.floor(o/10)&&(u="0"),0==Number.isNaN(r)?d.textContent=m+r+":"+u+o:d.textContent="00:00"})),l.addEventListener("click",(e=>{s.currentTime=e.offsetX/e.srcElement.clientWidth*s.duration}));const m=document.querySelector(".prevBtn");document.querySelector(".nextBtn").addEventListener("click",(()=>{s.paused&&(c.src="/dist/icons-and-images/pause-svgrepo-com.svg"),t==e.length-1?t=0:t++,n(t),s.setAttribute("src",e[t].songSrc);let a=s.play();void 0!==a&&a.then((()=>{s.play()})).catch((e=>{}))})),m.addEventListener("click",(()=>{s.paused&&(c.src="/dist/icons-and-images/pause-svgrepo-com.svg"),0==t?t=e.length-1:t--,n(t),s.setAttribute("src",e[t].songSrc);let a=s.play();void 0!==a&&a.then((()=>{s.play()})).catch((e=>{}))})),r.addEventListener("click",(e=>{s.volume=e.offsetX/e.srcElement.clientWidth}))},a=()=>{const c=document.querySelector(".main");for(;c.hasChildNodes();)c.removeChild(c.firstChild);const r=(()=>{const e=document.createElement("div");return e.classList="songCards",e})();let i=3;for(;i<6;){const n=e[i].imageSrc,s=e[i].name,a=e[i].artist,c=t(n,s,a);r.appendChild(c),i++}const d=(e=>{const t=document.createElement("img");return t.setAttribute("class","content-img"),t.src="",t})(),o=(()=>{const e=document.createElement("div");return e.classList="lyrics",e})(),l=(()=>{const e=document.createElement("div");return e.classList="mediaPlayer",e.appendChild((()=>{let e=document.createElement("audio");return e.classList="audioElement",e.src="",e})()),e.appendChild((()=>{const e=document.createElement("div");e.classList="songDetail";const t=document.createElement("img"),n=document.createElement("div");let s=document.createElement("div"),a=document.createElement("div");return s.classList="currTime",a.classList="totalTime",t.classList="music-gif",n.classList="duration",n.appendChild(s),n.appendChild(a),t.src="",e.appendChild(t),e.appendChild(n),e})()),e.appendChild((()=>{const e=document.createElement("input");return e.setAttribute("type","range"),e.classList="musicBar",e.value=0,e})()),e.appendChild((()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createElement("div"),s=document.createElement("div"),a=document.createElement("input");a.value=100;const c=document.createElement("img"),r=document.createElement("img"),i=document.createElement("img");return c.src="/dist/icons-and-images/previous-svgrepo-com.svg",r.src="/dist/icons-and-images/next-svgrepo-com.svg",i.src="/dist/icons-and-images/pause-svgrepo-com.svg",i.classList.add("playBtnImg","control-img"),r.classList.add("nextBtnImg","control-img"),c.classList.add("prevBtnImg","control-img"),t.classList.add("prevBtn","controlBtn"),s.classList.add("playBtn","controlBtn"),n.classList.add("nextBtn","controlBtn"),t.appendChild(c),s.appendChild(i),n.appendChild(r),a.setAttribute("type","range"),a.classList="volume",e.classList="controls",e.appendChild(t),e.appendChild(s),e.appendChild(n),e.appendChild(a),e})()),e})();c.appendChild(d),c.appendChild(o),c.appendChild(r),c.appendChild(l),document.querySelector(".songCards").addEventListener("click",(t=>{if("cards"==t.target.parentElement.className){const c=t.target.parentElement.children[1].textContent;let r;for(let t=0;t<e.length;t++)e[t].name==c&&(r=t);a(),n(r),s(r)}}))},c=t=>{if("cards"==t.target.parentElement.className){const c=t.target.parentElement.children[1].textContent;let r;for(let t=0;t<e.length;t++)e[t].name==c&&(r=t);a(),n(r),s(r)}},r=()=>{const n=document.querySelector(".main");for(;n.hasChildNodes();)n.removeChild(n.firstChild);const s=(()=>{const e=document.createElement("div");return e.classList="music-cards",e})();let a=0;for(;a<3;){const n=e[a].imageSrc,c=e[a].name,r=e[a].artist,i=t(n,c,r);s.appendChild(i),a++}const r=(()=>{const e=document.createElement("div");return e.classList="list-head",e.textContent="Play music",e})(),i=(()=>{const e=document.createElement("div");return e.classList="list-of-songs",e})();i.appendChild(r),i.appendChild(s);const d=(e=>{const t=document.createElement("img");return t.setAttribute("class","content-img"),t.src="",t})(),o=(()=>{const e=document.createElement("div");return e.setAttribute("class","content-data"),e.textContent="Get ready to enjoy the experience!",e})(),l=(()=>{const e=document.createElement("input");return e.setAttribute("type","search"),e.classList="search-bar",e})();n.appendChild(d),n.appendChild(o),n.appendChild(l),n.appendChild(i),document.querySelector(".music-cards").addEventListener("click",c)};(()=>{r();const e=document.querySelector(".home-btn"),t=document.querySelector(".music-list-btn");e.addEventListener("click",r),t.addEventListener("click",a)})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LGdCQUMzQkQsRUFBS1YsWUFBYyxxQ0FFWlUsR0FpRVM4RSxHQUVWQyxFQTFDVyxNQUNqQixNQUFNQyxFQUFNaEcsU0FBU0MsY0FBYyxTQUluQyxPQUhBK0YsRUFBSS9FLGFBQWEsT0FBUSxVQUN6QitFLEVBQUk5RixVQUFZLGFBRVQ4RixHQXFDV0MsR0FFbEJ0RixFQUFLRixZQUFZcUQsR0FDakJuRCxFQUFLRixZQUFZb0YsR0FDakJsRixFQUFLRixZQUFZc0YsR0FDakJwRixFQUFLRixZQUFZaUYsR0RoRUcxRixTQUFTWSxjQUFjLGdCQUUvQm9CLGlCQUFpQixRQUFTc0QsSUV4QnRCLE1BQ2hCLElBRUEsTUFBTVksRUFBVWxHLFNBQVNZLGNBQWMsYUFDakN3RCxFQUFjcEUsU0FBU1ksY0FBYyxtQkFHM0NzRixFQUFRbEUsaUJBQWlCLFFBQVMsR0FDbENvQyxFQUFZcEMsaUJBQWlCLFFBQVMsSUNUMUMsSSIsInNvdXJjZXMiOlsid2VicGFjazovL211c2ljLXBsYXllci8uL3NyYy9tb2R1bGVzL1NvbmdzTGlzdC9zb25nc0RhdGEuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvRnVuY3Rpb25hbGl0aWVzL21ha2VNdXNpY0NhcmRzLmpzIiwid2VicGFjazovL211c2ljLXBsYXllci8uL3NyYy9tb2R1bGVzL0Z1bmN0aW9uYWxpdGllcy9idWlsZEN1cnJlbnRNdXNpY0NhcmQuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvRnVuY3Rpb25hbGl0aWVzL3BsYXlNdXNpYy5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvbW9kdWxlcy9tdXNpY1BhZ2UuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvRnVuY3Rpb25hbGl0aWVzL2J1aWxkTXVzaWNQbGF5ZXIuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvVXNlciBJbnRlcmZhY2UvbXVzaWNQYWdlVUkuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvVXNlciBJbnRlcmZhY2UvaG9tZVVJLmpzIiwid2VicGFjazovL211c2ljLXBsYXllci8uL3NyYy9tb2R1bGVzL2hvbWUuanMiLCJ3ZWJwYWNrOi8vbXVzaWMtcGxheWVyLy4vc3JjL21vZHVsZXMvd2VicGFnZS5qcyIsIndlYnBhY2s6Ly9tdXNpYy1wbGF5ZXIvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3Qgc29uZ0xpc3QgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIk9uICYgT25cIixcbiAgICAgICAgYXJ0aXN0OiBcIkNhcnRvb24geCBIQVZTVU4geCBXQVlPVVQsIGZ0LiBEYW5pZWwgTGV2aVwiLFxuICAgICAgICBpbWFnZVNyYzogXCIvZGlzdC9zb25nLWltYWdlcy9vbiZvbi5qcGdcIixcbiAgICAgICAgc29uZ1NyYzpcbiAgICAgICAgICAgIFwiL2Rpc3Qvc2FtcGxlLXNvbmdzL0NhcnRvb24gLSBPbiAmIE9uIChmdC4gRGFuaWVsIExldmkpKENhcnRvb24geCBIQVZTVU4geCBXQVlPVVQgUmVtaXgpIFtOQ1MgUmVsZWFzZV0ubXAzXCIsXG4gICAgICAgIGR1cmF0aW9uOiBcIjAzOjU4XCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTW9ydGFsc1wiLFxuICAgICAgICBhcnRpc3Q6IFwiV2Fycml5bywgZmVhdC4gTGF1cmEgQnJlaG1cIixcbiAgICAgICAgaW1hZ2VTcmM6IFwiL2Rpc3Qvc29uZy1pbWFnZXMvd2Fycml5by5qcGdcIixcbiAgICAgICAgc29uZ1NyYzpcbiAgICAgICAgICAgIFwiL2Rpc3Qvc2FtcGxlLXNvbmdzL1dhcnJpeW8gLSBNb3J0YWxzIChmZWF0LiBMYXVyYSBCcmVobSkgW05DUyBSZWxlYXNlXS5tcDNcIixcbiAgICAgICAgZHVyYXRpb246IFwiMDM6NDhcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJDcmFkbGVzXCIsXG4gICAgICAgIGFydGlzdDogXCJTdWIgVXJiYW5cIixcbiAgICAgICAgaW1hZ2VTcmM6IFwiL2Rpc3Qvc29uZy1pbWFnZXMvY3JhZGxlcy5qcGdcIixcbiAgICAgICAgc29uZ1NyYzogXCIvZGlzdC9zYW1wbGUtc29uZ3MvU3ViIFVyYmFuIC0gQ3JhZGxlcyBbTkNTIFJlbGVhc2VdLm1wM1wiLFxuICAgICAgICBkdXJhdGlvbjogXCIwMzoyOVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkFkdmVudHVyZXNcIixcbiAgICAgICAgYXJ0aXN0OiBcIldpbGxpYW0gRWtoLCBmZWF0LiBBbGV4YSBMdXNhZGVyXCIsXG4gICAgICAgIGltYWdlU3JjOiBcIi9kaXN0L3NvbmctaW1hZ2VzL2FkdmVudHVyZXMuanBnXCIsXG4gICAgICAgIHNvbmdTcmM6XG4gICAgICAgICAgICBcIi9kaXN0L3NhbXBsZS1zb25ncy9XaWxsaWFtIEVraCAtIEFkdmVudHVyZXMgKGZlYXQuIEFsZXhhIEx1c2FkZXIpIFtOQ1MgUmVsZWFzZV0ubXAzXCIsXG4gICAgICAgIGR1cmF0aW9uOiBcIjAzOjExXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiU2V0IE1lIEZyZWVcIixcbiAgICAgICAgYXJ0aXN0OiBcIlNpbWJhaSAmIEZyaXp6eSBUaGUgU3RyZWV0elwiLFxuICAgICAgICBpbWFnZVNyYzogXCIvZGlzdC9zb25nLWltYWdlcy9zZXRtZWZyZWUuanBnXCIsXG4gICAgICAgIHNvbmdTcmM6XG4gICAgICAgICAgICBcIi9kaXN0L3NhbXBsZS1zb25ncy9TaW1iYWkgJiBGcml6enkgVGhlIFN0cmVldHogLSBTZXQgTWUgRnJlZSBbTkNTIFJlbGVhc2VdLm1wM1wiLFxuICAgICAgICBkdXJhdGlvbjogXCIwMjo0OVwiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkhlcm9lcyBUb25pZ2h0XCIsXG4gICAgICAgIGFydGlzdDogXCJKYW5qaSwgZnQuSm9obm5pbmdcIixcbiAgICAgICAgaW1hZ2VTcmM6IFwiL2Rpc3Qvc29uZy1pbWFnZXMvamFuamkuanBnXCIsXG4gICAgICAgIHNvbmdTcmM6XG4gICAgICAgICAgICBcIi9kaXN0L3NhbXBsZS1zb25ncy9KYW5qaSAtIEhlcm9lcyBUb25pZ2h0IChmZWF0LiBKb2hubmluZykgW05DUyBSZWxlYXNlXS5tcDNcIixcbiAgICAgICAgZHVyYXRpb246IFwiMDM6MjhcIixcbiAgICB9LFxuXTtcblxuZXhwb3J0IGRlZmF1bHQgc29uZ0xpc3Q7XG4iLCJjb25zdCBtYWtlTXVzaWNDYXJkcyA9IChzb3VyY2UsIG5hbWUsIGFydGlzdCkgPT4ge1xuICAgIGNvbnN0IHNvbmdJbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpO1xuICAgIHNvbmdJbWcuY2xhc3NMaXN0LmFkZChcImNhcmQtaW1nXCIpO1xuICAgIHNvbmdJbWcuc3JjID0gc291cmNlO1xuXG4gICAgY29uc3Qgc29uZ05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHNvbmdOYW1lLmNsYXNzTGlzdC5hZGQoXCJtdXNpYy1uYW1lXCIpO1xuICAgIHNvbmdOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIGNvbnN0IGFydGlzdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGFydGlzdE5hbWUuY2xhc3NMaXN0LmFkZChcImFydGlzdC1uYW1lXCIpO1xuICAgIGFydGlzdE5hbWUudGV4dENvbnRlbnQgPSBhcnRpc3Q7XG5cbiAgICBjb25zdCBtYWluQ2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbWFpbkNhcmQuY2xhc3NMaXN0LmFkZChcImNhcmRzXCIpO1xuXG4gICAgbWFpbkNhcmQuYXBwZW5kQ2hpbGQoc29uZ0ltZyk7XG4gICAgbWFpbkNhcmQuYXBwZW5kQ2hpbGQoc29uZ05hbWUpO1xuICAgIG1haW5DYXJkLmFwcGVuZENoaWxkKGFydGlzdE5hbWUpO1xuXG4gICAgcmV0dXJuIG1haW5DYXJkO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWFrZU11c2ljQ2FyZHM7XG4iLCJpbXBvcnQgc29uZ0xpc3QgZnJvbSBcIi4uL1NvbmdzTGlzdC9zb25nc0RhdGFcIjtcblxuY29uc3QgYnVpbGRTb25nSW5mbyA9IChpbmRleCkgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRhdGEuY2xhc3NMaXN0ID0gXCJzb25nRGF0YVwiO1xuXG4gICAgY29uc3Qgc29uZ0ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgc29uZ0ltZy5jbGFzc0xpc3QgPSBcIm1haW5JbWdcIjtcbiAgICBzb25nSW1nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBzb25nTGlzdFtpbmRleF0uaW1hZ2VTcmMpO1xuXG4gICAgY29uc3Qgc29uZ05hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIHNvbmdOYW1lLmNsYXNzTGlzdCA9IFwic29uZ05hbWVcIjtcbiAgICBzb25nTmFtZS50ZXh0Q29udGVudCA9IHNvbmdMaXN0W2luZGV4XS5uYW1lO1xuXG4gICAgY29uc3Qgc29uZ1dyaXRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgc29uZ1dyaXRlci5jbGFzc0xpc3QgPSBcImFydGlzdFwiO1xuICAgIHNvbmdXcml0ZXIudGV4dENvbnRlbnQgPSBzb25nTGlzdFtpbmRleF0uYXJ0aXN0O1xuXG4gICAgZGF0YS5hcHBlbmRDaGlsZChzb25nSW1nKTtcbiAgICBkYXRhLmFwcGVuZENoaWxkKHNvbmdOYW1lKTtcbiAgICBkYXRhLmFwcGVuZENoaWxkKHNvbmdXcml0ZXIpO1xuXG4gICAgcmV0dXJuIGRhdGE7XG59O1xuXG5jb25zdCBnZXRTb25nRGV0YWlscyA9IChpbmRleCkgPT4ge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5cIik7XG5cbiAgICBpZiAobWFpbi5sYXN0Q2hpbGQuY2xhc3NOYW1lID09IFwic29uZ0RhdGFcIikge1xuICAgICAgICBtYWluLnJlbW92ZUNoaWxkKG1haW4ubGFzdENoaWxkKTtcbiAgICB9XG4gICAgbWFpbi5hcHBlbmRDaGlsZChidWlsZFNvbmdJbmZvKGluZGV4KSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBnZXRTb25nRGV0YWlscztcbiIsImltcG9ydCBzb25nTGlzdCBmcm9tIFwiLi4vU29uZ3NMaXN0L3NvbmdzRGF0YVwiO1xuaW1wb3J0IGdldFNvbmdEZXRhaWxzIGZyb20gXCIuL2J1aWxkQ3VycmVudE11c2ljQ2FyZFwiO1xuXG5jb25zdCBhZGRDb250cm9sc0Z1bmN0aW9uYWxpdHkgPSAoaW5kZXgpID0+IHtcbiAgICBsZXQgY3VycmVudFNvbmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmF1ZGlvRWxlbWVudFwiKTtcbiAgICBsZXQgcGxheUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxheUJ0blwiKTtcbiAgICBsZXQgcGxheUJ0bkltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGxheUJ0bkltZ1wiKTtcbiAgICBjb25zdCB2b2wgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnZvbHVtZVwiKTtcbiAgICBsZXQgY3VyclRpbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmN1cnJUaW1lXCIpO1xuICAgIGNvbnN0IHRvdGFsVGltZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG90YWxUaW1lXCIpO1xuXG4gICAgY3VycmVudFNvbmcuc2V0QXR0cmlidXRlKFwic3JjXCIsIHNvbmdMaXN0W2luZGV4XS5zb25nU3JjKTtcblxuICAgIGxldCBwbGF5UHJvbWlzZSA9IGN1cnJlbnRTb25nLnBsYXkoKTtcblxuICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBsYXlQcm9taXNlXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgY3VycmVudFNvbmcucGxheSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTtcbiAgICB9XG5cbiAgICBwbGF5QnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGlmIChjdXJyZW50U29uZy5wYXVzZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTb25nLnBsYXkoKTtcbiAgICAgICAgICAgIHBsYXlCdG5JbWcuc3JjID0gXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL3BhdXNlLXN2Z3JlcG8tY29tLnN2Z1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VycmVudFNvbmcucGF1c2UoKTtcbiAgICAgICAgICAgIHBsYXlCdG5JbWcuc3JjID0gXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL3BsYXktc3ZncmVwby1jb20uc3ZnXCI7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGNvbnN0IG11c2ljQmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tdXNpY0JhclwiKTtcblxuICAgIGN1cnJlbnRTb25nLmFkZEV2ZW50TGlzdGVuZXIoXCJ0aW1ldXBkYXRlXCIsICgpID0+IHtcbiAgICAgICAgLy9nZXQgdmFsdWUgaW4gcGVyY2VudFxuICAgICAgICBsZXQgc29uZ1Byb2dyZXNzID1cbiAgICAgICAgICAgIChjdXJyZW50U29uZy5jdXJyZW50VGltZSAvIGN1cnJlbnRTb25nLmR1cmF0aW9uKSAqIDEwMDtcblxuICAgICAgICBtdXNpY0Jhci52YWx1ZSA9IHNvbmdQcm9ncmVzcztcblxuICAgICAgICBsZXQgdGltZUluTWlucyA9IE1hdGguZmxvb3IoY3VycmVudFNvbmcuY3VycmVudFRpbWUgLyA2MCk7XG4gICAgICAgIGxldCB0aW1lSW5TZWMgPSBNYXRoLmZsb29yKGN1cnJlbnRTb25nLmN1cnJlbnRUaW1lICUgNjApO1xuXG4gICAgICAgIGxldCBiZWZNaW4gPSBcIlwiLFxuICAgICAgICAgICAgYmVmU2VjID0gXCJcIjtcbiAgICAgICAgaWYgKHRpbWVJbk1pbnMgLyAxMCA9PSAwKSB7XG4gICAgICAgICAgICBiZWZNaW4gPSBcIjBcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoTWF0aC5mbG9vcih0aW1lSW5TZWMgLyAxMCkgPT0gMCkge1xuICAgICAgICAgICAgYmVmU2VjID0gXCIwXCI7XG4gICAgICAgIH1cbiAgICAgICAgY3VyclRpbWUudGV4dENvbnRlbnQgPSBiZWZNaW4gKyB0aW1lSW5NaW5zICsgXCI6XCIgKyBiZWZTZWMgKyB0aW1lSW5TZWM7XG5cbiAgICAgICAgbGV0IGluTWlucyA9IE1hdGguZmxvb3IoY3VycmVudFNvbmcuZHVyYXRpb24gLyA2MCk7XG4gICAgICAgIGxldCBpblNlYyA9IE1hdGguZmxvb3IoY3VycmVudFNvbmcuZHVyYXRpb24gJSA2MCk7XG5cbiAgICAgICAgbGV0IGJlZk1pbnMgPSBcIlwiLFxuICAgICAgICAgICAgYmVmU2VjcyA9IFwiXCI7XG4gICAgICAgIGlmIChpbk1pbnMgLyAxMCA9PSAwKSB7XG4gICAgICAgICAgICBiZWZNaW5zID0gXCIwXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKE1hdGguZmxvb3IoaW5TZWMgLyAxMCkgPT0gMCkge1xuICAgICAgICAgICAgYmVmU2VjcyA9IFwiMFwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChOdW1iZXIuaXNOYU4oaW5NaW5zKSA9PSBmYWxzZSlcbiAgICAgICAgICAgIHRvdGFsVGltZS50ZXh0Q29udGVudCA9IGJlZk1pbnMgKyBpbk1pbnMgKyBcIjpcIiArIGJlZlNlY3MgKyBpblNlYztcbiAgICAgICAgZWxzZSB0b3RhbFRpbWUudGV4dENvbnRlbnQgPSBcIjAwOjAwXCI7XG4gICAgfSk7XG5cbiAgICBtdXNpY0Jhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGUpID0+IHtcbiAgICAgICAgY3VycmVudFNvbmcuY3VycmVudFRpbWUgPVxuICAgICAgICAgICAgKGUub2Zmc2V0WCAvIGUuc3JjRWxlbWVudC5jbGllbnRXaWR0aCkgKiBjdXJyZW50U29uZy5kdXJhdGlvbjtcbiAgICB9KTtcblxuICAgIGNvbnN0IHByZXZCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByZXZCdG5cIik7XG4gICAgY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmV4dEJ0blwiKTtcblxuICAgIG5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgaWYgKGN1cnJlbnRTb25nLnBhdXNlZCkge1xuICAgICAgICAgICAgcGxheUJ0bkltZy5zcmMgPSBcIi9kaXN0L2ljb25zLWFuZC1pbWFnZXMvcGF1c2Utc3ZncmVwby1jb20uc3ZnXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZGV4ID09IHNvbmdMaXN0Lmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgIGluZGV4ID0gMDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgZ2V0U29uZ0RldGFpbHMoaW5kZXgpO1xuICAgICAgICBjdXJyZW50U29uZy5zZXRBdHRyaWJ1dGUoXCJzcmNcIiwgc29uZ0xpc3RbaW5kZXhdLnNvbmdTcmMpO1xuXG4gICAgICAgIGxldCBwbGF5UHJvbWlzZSA9IGN1cnJlbnRTb25nLnBsYXkoKTtcblxuICAgICAgICBpZiAocGxheVByb21pc2UgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcGxheVByb21pc2VcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTb25nLnBsYXkoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHt9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgcHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBpZiAoY3VycmVudFNvbmcucGF1c2VkKSB7XG4gICAgICAgICAgICBwbGF5QnRuSW1nLnNyYyA9IFwiL2Rpc3QvaWNvbnMtYW5kLWltYWdlcy9wYXVzZS1zdmdyZXBvLWNvbS5zdmdcIjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXggPT0gMCkge1xuICAgICAgICAgICAgaW5kZXggPSBzb25nTGlzdC5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICBnZXRTb25nRGV0YWlscyhpbmRleCk7XG4gICAgICAgIGN1cnJlbnRTb25nLnNldEF0dHJpYnV0ZShcInNyY1wiLCBzb25nTGlzdFtpbmRleF0uc29uZ1NyYyk7XG5cbiAgICAgICAgbGV0IHBsYXlQcm9taXNlID0gY3VycmVudFNvbmcucGxheSgpO1xuXG4gICAgICAgIGlmIChwbGF5UHJvbWlzZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBwbGF5UHJvbWlzZVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNvbmcucGxheSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge30pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICB2b2wuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGN1cnJlbnRTb25nLnZvbHVtZSA9IGUub2Zmc2V0WCAvIGUuc3JjRWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICB9KTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFkZENvbnRyb2xzRnVuY3Rpb25hbGl0eTtcbiIsImltcG9ydCBzb25nTGlzdCBmcm9tIFwiLi9Tb25nc0xpc3Qvc29uZ3NEYXRhXCI7XG5pbXBvcnQgbWFrZU11c2ljQ2FyZHMgZnJvbSBcIi4vRnVuY3Rpb25hbGl0aWVzL21ha2VNdXNpY0NhcmRzXCI7XG5pbXBvcnQgYnVpbGRTb25nSW5mbyBmcm9tIFwiLi9GdW5jdGlvbmFsaXRpZXMvYnVpbGRDdXJyZW50TXVzaWNDYXJkLmpzXCI7XG5pbXBvcnQgYnVpbGRQbGF5ZXIgZnJvbSBcIi4vRnVuY3Rpb25hbGl0aWVzL2J1aWxkTXVzaWNQbGF5ZXJcIjtcbmltcG9ydCBhZGRGdW5jdGlvbmFsaXR5VG9DYXJkc09uTXVzaWNQYWdlIGZyb20gXCIuL1VzZXIgSW50ZXJmYWNlL211c2ljUGFnZVVJXCI7XG5cbmNvbnN0IGdldEx5cmljcyA9ICgpID0+IHtcbiAgICBjb25zdCBseXJpY3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGx5cmljcy5jbGFzc0xpc3QgPSBcImx5cmljc1wiO1xuXG4gICAgcmV0dXJuIGx5cmljcztcbn07XG5cbmNvbnN0IGFkZENhcmRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjYXJkc0NvbnRhaW5lci5jbGFzc0xpc3QgPSBcInNvbmdDYXJkc1wiO1xuXG4gICAgcmV0dXJuIGNhcmRzQ29udGFpbmVyO1xufTtcblxuY29uc3QgYnVpbGRDb250ZW50SW1nID0gKHNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IGhvbWVCZ0ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgaG9tZUJnSW1nLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29udGVudC1pbWdcIik7XG4gICAgaG9tZUJnSW1nLnNyYyA9IHNvdXJjZTtcblxuICAgIHJldHVybiBob21lQmdJbWc7XG59O1xuXG5jb25zdCBsb2FkTXVzaWNQYWdlID0gKCkgPT4ge1xuICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1haW5cIik7XG5cbiAgICB3aGlsZSAobWFpbi5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgbWFpbi5yZW1vdmVDaGlsZChtYWluLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8vIGhvbWUtYmFja2dyb3VuZCBpbWFnZSBzcmNcbiAgICBjb25zdCBpbGx1c1NyYyA9IFwiXCI7XG5cbiAgICBjb25zdCBjYXJkc0NvbnRhaW5lciA9IGFkZENhcmRzKCk7XG5cbiAgICBsZXQgaW5kZXggPSAzO1xuICAgIHdoaWxlIChpbmRleCA8IDYpIHtcbiAgICAgICAgY29uc3Qgc3JjID0gc29uZ0xpc3RbaW5kZXhdLmltYWdlU3JjO1xuICAgICAgICBjb25zdCBuYW1lID0gc29uZ0xpc3RbaW5kZXhdLm5hbWU7XG4gICAgICAgIGNvbnN0IGFydGlzdCA9IHNvbmdMaXN0W2luZGV4XS5hcnRpc3Q7XG5cbiAgICAgICAgY29uc3QgY2FyZCA9IG1ha2VNdXNpY0NhcmRzKHNyYywgbmFtZSwgYXJ0aXN0LCBpbmRleCArIDEpO1xuICAgICAgICBjYXJkc0NvbnRhaW5lci5hcHBlbmRDaGlsZChjYXJkKTtcblxuICAgICAgICBpbmRleCsrO1xuICAgIH1cblxuICAgIGNvbnN0IGJnSW1hZ2UgPSBidWlsZENvbnRlbnRJbWcoaWxsdXNTcmMpO1xuXG4gICAgY29uc3QgbHlyaWNzID0gZ2V0THlyaWNzKCk7XG5cbiAgICBjb25zdCBtdXNpY1BsYXllciA9IGJ1aWxkUGxheWVyKCk7XG5cbiAgICBtYWluLmFwcGVuZENoaWxkKGJnSW1hZ2UpO1xuICAgIG1haW4uYXBwZW5kQ2hpbGQobHlyaWNzKTtcbiAgICBtYWluLmFwcGVuZENoaWxkKGNhcmRzQ29udGFpbmVyKTtcbiAgICBtYWluLmFwcGVuZENoaWxkKG11c2ljUGxheWVyKTtcblxuICAgIGFkZEZ1bmN0aW9uYWxpdHlUb0NhcmRzT25NdXNpY1BhZ2UoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGxvYWRNdXNpY1BhZ2U7XG4iLCJjb25zdCBhZGRBdWRpb0VsZW1lbnQgPSAoKSA9PiB7XG4gICAgbGV0IGF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpO1xuICAgIGF1ZGlvLmNsYXNzTGlzdCA9IFwiYXVkaW9FbGVtZW50XCI7XG4gICAgYXVkaW8uc3JjID0gXCJcIjtcblxuICAgIHJldHVybiBhdWRpbztcbn07XG5cbmNvbnN0IGFkZE11c2ljUmFuZ2VCYXIgPSAoKSA9PiB7XG4gICAgY29uc3QgcmFuZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gICAgcmFuZ2Uuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInJhbmdlXCIpO1xuICAgIHJhbmdlLmNsYXNzTGlzdCA9IFwibXVzaWNCYXJcIjtcbiAgICByYW5nZS52YWx1ZSA9IDA7XG5cbiAgICByZXR1cm4gcmFuZ2U7XG59O1xuXG5jb25zdCBhZGRTb25nSW5mbyA9ICgpID0+IHtcbiAgICBjb25zdCBpbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpbmZvLmNsYXNzTGlzdCA9IFwic29uZ0RldGFpbFwiO1xuXG4gICAgY29uc3QgZ2lmID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBjb25zdCBkdXJhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBsZXQgY3VyclRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGxldCB0b3RhbFRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgY3VyclRpbWUuY2xhc3NMaXN0ID0gXCJjdXJyVGltZVwiO1xuICAgIHRvdGFsVGltZS5jbGFzc0xpc3QgPSBcInRvdGFsVGltZVwiO1xuXG4gICAgZ2lmLmNsYXNzTGlzdCA9IFwibXVzaWMtZ2lmXCI7XG4gICAgZHVyYXRpb24uY2xhc3NMaXN0ID0gXCJkdXJhdGlvblwiO1xuXG4gICAgZHVyYXRpb24uYXBwZW5kQ2hpbGQoY3VyclRpbWUpO1xuICAgIGR1cmF0aW9uLmFwcGVuZENoaWxkKHRvdGFsVGltZSk7XG5cbiAgICAvL1RPRE8gOiBBZGQgZ2lmIHNvdXJjZVxuICAgIGdpZi5zcmMgPSBcIlwiO1xuXG4gICAgaW5mby5hcHBlbmRDaGlsZChnaWYpO1xuICAgIGluZm8uYXBwZW5kQ2hpbGQoZHVyYXRpb24pO1xuXG4gICAgcmV0dXJuIGluZm87XG59O1xuXG5jb25zdCBhZGRDb250cm9scyA9ICgpID0+IHtcbiAgICBjb25zdCBjb250cm9scyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cbiAgICBjb25zdCBwcmV2QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBuZXh0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBwbGF5QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIGNvbnN0IHZvbHVtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgICB2b2x1bWUudmFsdWUgPSAxMDA7XG5cbiAgICBjb25zdCBwcmV2QnRuSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBjb25zdCBuZXh0QnRuSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcbiAgICBjb25zdCBwbGF5QnRuSW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKTtcblxuICAgIHByZXZCdG5JbWcuc3JjID0gXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL3ByZXZpb3VzLXN2Z3JlcG8tY29tLnN2Z1wiO1xuICAgIG5leHRCdG5JbWcuc3JjID0gXCIvZGlzdC9pY29ucy1hbmQtaW1hZ2VzL25leHQtc3ZncmVwby1jb20uc3ZnXCI7XG4gICAgcGxheUJ0bkltZy5zcmMgPSBcIi9kaXN0L2ljb25zLWFuZC1pbWFnZXMvcGF1c2Utc3ZncmVwby1jb20uc3ZnXCI7XG5cbiAgICBwbGF5QnRuSW1nLmNsYXNzTGlzdC5hZGQoXCJwbGF5QnRuSW1nXCIsIFwiY29udHJvbC1pbWdcIik7XG4gICAgbmV4dEJ0bkltZy5jbGFzc0xpc3QuYWRkKFwibmV4dEJ0bkltZ1wiLCBcImNvbnRyb2wtaW1nXCIpO1xuICAgIHByZXZCdG5JbWcuY2xhc3NMaXN0LmFkZChcInByZXZCdG5JbWdcIiwgXCJjb250cm9sLWltZ1wiKTtcblxuICAgIHByZXZCdG4uY2xhc3NMaXN0LmFkZChcInByZXZCdG5cIiwgXCJjb250cm9sQnRuXCIpO1xuICAgIHBsYXlCdG4uY2xhc3NMaXN0LmFkZChcInBsYXlCdG5cIiwgXCJjb250cm9sQnRuXCIpO1xuICAgIG5leHRCdG4uY2xhc3NMaXN0LmFkZChcIm5leHRCdG5cIiwgXCJjb250cm9sQnRuXCIpO1xuXG4gICAgcHJldkJ0bi5hcHBlbmRDaGlsZChwcmV2QnRuSW1nKTtcbiAgICBwbGF5QnRuLmFwcGVuZENoaWxkKHBsYXlCdG5JbWcpO1xuICAgIG5leHRCdG4uYXBwZW5kQ2hpbGQobmV4dEJ0bkltZyk7XG5cbiAgICB2b2x1bWUuc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInJhbmdlXCIpO1xuICAgIHZvbHVtZS5jbGFzc0xpc3QgPSBcInZvbHVtZVwiO1xuXG4gICAgY29udHJvbHMuY2xhc3NMaXN0ID0gXCJjb250cm9sc1wiO1xuXG4gICAgY29udHJvbHMuYXBwZW5kQ2hpbGQocHJldkJ0bik7XG4gICAgY29udHJvbHMuYXBwZW5kQ2hpbGQocGxheUJ0bik7XG4gICAgY29udHJvbHMuYXBwZW5kQ2hpbGQobmV4dEJ0bik7XG4gICAgY29udHJvbHMuYXBwZW5kQ2hpbGQodm9sdW1lKTtcblxuICAgIHJldHVybiBjb250cm9scztcbn07XG5cbmNvbnN0IGJ1aWxkUGxheWVyID0gKCkgPT4ge1xuICAgIGNvbnN0IG1lZGlhUGxheWVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBtZWRpYVBsYXllci5jbGFzc0xpc3QgPSBcIm1lZGlhUGxheWVyXCI7XG5cbiAgICBtZWRpYVBsYXllci5hcHBlbmRDaGlsZChhZGRBdWRpb0VsZW1lbnQoKSk7XG4gICAgbWVkaWFQbGF5ZXIuYXBwZW5kQ2hpbGQoYWRkU29uZ0luZm8oKSk7XG4gICAgbWVkaWFQbGF5ZXIuYXBwZW5kQ2hpbGQoYWRkTXVzaWNSYW5nZUJhcigpKTtcbiAgICBtZWRpYVBsYXllci5hcHBlbmRDaGlsZChhZGRDb250cm9scygpKTtcblxuICAgIHJldHVybiBtZWRpYVBsYXllcjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGJ1aWxkUGxheWVyO1xuIiwiaW1wb3J0IHNvbmdMaXN0IGZyb20gXCIuLi9Tb25nc0xpc3Qvc29uZ3NEYXRhXCI7XG5pbXBvcnQgYWRkQ29udHJvbHNGdW5jdGlvbmFsaXR5IGZyb20gXCIuLi9GdW5jdGlvbmFsaXRpZXMvcGxheU11c2ljXCI7XG5pbXBvcnQgZ2V0U29uZ0RldGFpbHMgZnJvbSBcIi4uL0Z1bmN0aW9uYWxpdGllcy9idWlsZEN1cnJlbnRNdXNpY0NhcmRcIjtcbmltcG9ydCBsb2FkTXVzaWNQYWdlIGZyb20gXCIuLi9tdXNpY1BhZ2VcIjtcblxuY29uc3QgYWRkRnVuY3Rpb25hbGl0eVRvQ2FyZHNPbk11c2ljUGFnZSA9ICgpID0+IHtcbiAgICBjb25zdCBjYXJkc1BhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc29uZ0NhcmRzXCIpO1xuXG4gICAgY2FyZHNQYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9PSBcImNhcmRzXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IHNvbmdOYW1lID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5jaGlsZHJlblsxXS50ZXh0Q29udGVudDtcblxuICAgICAgICAgICAgbGV0IHNvbmdJbmRleDtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29uZ0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoc29uZ0xpc3RbaV0ubmFtZSA9PSBzb25nTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBzb25nSW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxvYWRNdXNpY1BhZ2UoKTtcbiAgICAgICAgICAgIGdldFNvbmdEZXRhaWxzKHNvbmdJbmRleCk7XG4gICAgICAgICAgICBhZGRDb250cm9sc0Z1bmN0aW9uYWxpdHkoc29uZ0luZGV4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYWRkRnVuY3Rpb25hbGl0eVRvQ2FyZHNPbk11c2ljUGFnZTtcbiIsImltcG9ydCBsb2FkTXVzaWNQYWdlIGZyb20gXCIuLi9tdXNpY1BhZ2VcIjtcbmltcG9ydCBzb25nTGlzdCBmcm9tIFwiLi4vU29uZ3NMaXN0L3NvbmdzRGF0YVwiO1xuaW1wb3J0IGFkZENvbnRyb2xzRnVuY3Rpb25hbGl0eSBmcm9tIFwiLi4vRnVuY3Rpb25hbGl0aWVzL3BsYXlNdXNpY1wiO1xuaW1wb3J0IGdldFNvbmdEZXRhaWxzIGZyb20gXCIuLi9GdW5jdGlvbmFsaXRpZXMvYnVpbGRDdXJyZW50TXVzaWNDYXJkXCI7XG5cbmNvbnN0IGdldENsaWNrZWQgPSAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNsYXNzTmFtZSA9PSBcImNhcmRzXCIpIHtcbiAgICAgICAgY29uc3Qgc29uZ05hbWUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzFdLnRleHRDb250ZW50O1xuXG4gICAgICAgIGxldCBzb25nSW5kZXg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc29uZ0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChzb25nTGlzdFtpXS5uYW1lID09IHNvbmdOYW1lKSB7XG4gICAgICAgICAgICAgICAgc29uZ0luZGV4ID0gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxvYWRNdXNpY1BhZ2UoKTtcbiAgICAgICAgZ2V0U29uZ0RldGFpbHMoc29uZ0luZGV4KTtcbiAgICAgICAgYWRkQ29udHJvbHNGdW5jdGlvbmFsaXR5KHNvbmdJbmRleCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn07XG5cbmNvbnN0IGFkZEZ1bmN0aW9uYWxpdHlUb011c2ljQ2FyZHMgPSAoKSA9PiB7XG4gICAgY29uc3QgY2FyZHNQYXJlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm11c2ljLWNhcmRzXCIpO1xuXG4gICAgY2FyZHNQYXJlbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGdldENsaWNrZWQpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYWRkRnVuY3Rpb25hbGl0eVRvTXVzaWNDYXJkcztcbiIsImltcG9ydCBzb25nTGlzdCBmcm9tIFwiLi9Tb25nc0xpc3Qvc29uZ3NEYXRhXCI7XG5pbXBvcnQgbWFrZU11c2ljQ2FyZHMgZnJvbSBcIi4vRnVuY3Rpb25hbGl0aWVzL21ha2VNdXNpY0NhcmRzXCI7XG5pbXBvcnQgYWRkRnVuY3Rpb25hbGl0eVRvTXVzaWNDYXJkcyBmcm9tIFwiLi9Vc2VyIEludGVyZmFjZS9ob21lVUlcIjtcblxuY29uc3QgYnVpbGRDb250ZW50SW1nID0gKHNvdXJjZSkgPT4ge1xuICAgIGNvbnN0IGhvbWVCZ0ltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIik7XG4gICAgaG9tZUJnSW1nLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiY29udGVudC1pbWdcIik7XG4gICAgaG9tZUJnSW1nLnNyYyA9IHNvdXJjZTtcblxuICAgIHJldHVybiBob21lQmdJbWc7XG59O1xuXG5jb25zdCBidWlsZENvbnRlbnQgPSAoKSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgZGF0YS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImNvbnRlbnQtZGF0YVwiKTtcbiAgICBkYXRhLnRleHRDb250ZW50ID0gXCJHZXQgcmVhZHkgdG8gZW5qb3kgdGhlIGV4cGVyaWVuY2UhXCI7XG5cbiAgICByZXR1cm4gZGF0YTtcbn07XG5cbmNvbnN0IGdldFNvbmdzTGlzdCA9ICgpID0+IHtcbiAgICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBsaXN0LmNsYXNzTGlzdCA9IFwibGlzdC1vZi1zb25nc1wiO1xuXG4gICAgcmV0dXJuIGxpc3Q7XG59O1xuXG5jb25zdCBhZGRIZWFkID0gKCkgPT4ge1xuICAgIGNvbnN0IGhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGhlYWQuY2xhc3NMaXN0ID0gXCJsaXN0LWhlYWRcIjtcbiAgICBoZWFkLnRleHRDb250ZW50ID0gXCJQbGF5IG11c2ljXCI7XG5cbiAgICByZXR1cm4gaGVhZDtcbn07XG5cbmNvbnN0IGFkZENhcmRzID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhcmRzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjYXJkc0NvbnRhaW5lci5jbGFzc0xpc3QgPSBcIm11c2ljLWNhcmRzXCI7XG5cbiAgICByZXR1cm4gY2FyZHNDb250YWluZXI7XG59O1xuXG5jb25zdCBhZGRTZWFyY2hCYXIgPSAoKSA9PiB7XG4gICAgY29uc3QgYmFyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuICAgIGJhci5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwic2VhcmNoXCIpO1xuICAgIGJhci5jbGFzc0xpc3QgPSBcInNlYXJjaC1iYXJcIjtcblxuICAgIHJldHVybiBiYXI7XG59O1xuXG5jb25zdCBsb2FkSG9tZSA9ICgpID0+IHtcbiAgICBjb25zdCBtYWluID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluXCIpO1xuXG4gICAgd2hpbGUgKG1haW4uaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICAgIG1haW4ucmVtb3ZlQ2hpbGQobWFpbi5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICAvLyBob21lLWJhY2tncm91bmQgaW1hZ2Ugc3JjXG4gICAgY29uc3QgaWxsdXNTcmMgPSBcIlwiO1xuXG4gICAgY29uc3QgY2FyZHNDb250YWluZXIgPSBhZGRDYXJkcygpO1xuXG4gICAgLy8gc29uZydzIGltYWdlIGFuZCBuYW1lXG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICB3aGlsZSAoaW5kZXggPCAzKSB7XG4gICAgICAgIGNvbnN0IHNyYyA9IHNvbmdMaXN0W2luZGV4XS5pbWFnZVNyYztcbiAgICAgICAgY29uc3QgbmFtZSA9IHNvbmdMaXN0W2luZGV4XS5uYW1lO1xuICAgICAgICBjb25zdCBhcnRpc3QgPSBzb25nTGlzdFtpbmRleF0uYXJ0aXN0O1xuXG4gICAgICAgIGNvbnN0IGNhcmQgPSBtYWtlTXVzaWNDYXJkcyhzcmMsIG5hbWUsIGFydGlzdCwgaW5kZXggKyAxKTtcbiAgICAgICAgY2FyZHNDb250YWluZXIuYXBwZW5kQ2hpbGQoY2FyZCk7XG5cbiAgICAgICAgaW5kZXgrKztcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0SGVhZCA9IGFkZEhlYWQoKTtcblxuICAgIGNvbnN0IHNvbmdzTGlzdCA9IGdldFNvbmdzTGlzdCgpO1xuICAgIHNvbmdzTGlzdC5hcHBlbmRDaGlsZChsaXN0SGVhZCk7XG4gICAgc29uZ3NMaXN0LmFwcGVuZENoaWxkKGNhcmRzQ29udGFpbmVyKTtcblxuICAgIGNvbnN0IGJnSW1hZ2UgPSBidWlsZENvbnRlbnRJbWcoaWxsdXNTcmMpO1xuICAgIGNvbnN0IGhvbWVNc2cgPSBidWlsZENvbnRlbnQoKTtcblxuICAgIGNvbnN0IHNlYXJjaEJhciA9IGFkZFNlYXJjaEJhcigpO1xuXG4gICAgbWFpbi5hcHBlbmRDaGlsZChiZ0ltYWdlKTtcbiAgICBtYWluLmFwcGVuZENoaWxkKGhvbWVNc2cpO1xuICAgIG1haW4uYXBwZW5kQ2hpbGQoc2VhcmNoQmFyKTtcbiAgICBtYWluLmFwcGVuZENoaWxkKHNvbmdzTGlzdCk7XG5cbiAgICBhZGRGdW5jdGlvbmFsaXR5VG9NdXNpY0NhcmRzKCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2FkSG9tZTtcbiIsImltcG9ydCBsb2FkSG9tZSBmcm9tIFwiLi9ob21lXCI7XG5pbXBvcnQgbG9hZE11c2ljUGFnZSBmcm9tIFwiLi9tdXNpY1BhZ2VcIjtcblxuY29uc3QgbG9hZFdlYnBhZ2UgPSAoKSA9PiB7XG4gICAgbG9hZEhvbWUoKTtcblxuICAgIGNvbnN0IGhvbWVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhvbWUtYnRuXCIpO1xuICAgIGNvbnN0IG1lZGlhUGxheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tdXNpYy1saXN0LWJ0blwiKTtcbiAgICAvL2NvbnN0IHBsYXlsaXN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcInBsYXlsaXN0LWJ0blwiKTtcblxuICAgIGhvbWVCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGxvYWRIb21lKTtcbiAgICBtZWRpYVBsYXllci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbG9hZE11c2ljUGFnZSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2FkV2VicGFnZTtcbiIsImltcG9ydCBsb2FkV2VicGFnZSBmcm9tIFwiLi9tb2R1bGVzL3dlYnBhZ2VcIjtcblxubG9hZFdlYnBhZ2UoKTtcbiJdLCJuYW1lcyI6WyJuYW1lIiwiYXJ0aXN0IiwiaW1hZ2VTcmMiLCJzb25nU3JjIiwiZHVyYXRpb24iLCJzb3VyY2UiLCJzb25nSW1nIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwic3JjIiwic29uZ05hbWUiLCJ0ZXh0Q29udGVudCIsImFydGlzdE5hbWUiLCJtYWluQ2FyZCIsImFwcGVuZENoaWxkIiwiaW5kZXgiLCJtYWluIiwicXVlcnlTZWxlY3RvciIsImxhc3RDaGlsZCIsImNsYXNzTmFtZSIsInJlbW92ZUNoaWxkIiwiZGF0YSIsInNldEF0dHJpYnV0ZSIsInNvbmdXcml0ZXIiLCJidWlsZFNvbmdJbmZvIiwiY3VycmVudFNvbmciLCJwbGF5QnRuIiwicGxheUJ0bkltZyIsInZvbCIsImN1cnJUaW1lIiwidG90YWxUaW1lIiwicGxheVByb21pc2UiLCJwbGF5IiwidW5kZWZpbmVkIiwidGhlbiIsImNhdGNoIiwiZXJyb3IiLCJhZGRFdmVudExpc3RlbmVyIiwicGF1c2VkIiwicGF1c2UiLCJtdXNpY0JhciIsInNvbmdQcm9ncmVzcyIsImN1cnJlbnRUaW1lIiwidmFsdWUiLCJ0aW1lSW5NaW5zIiwiTWF0aCIsImZsb29yIiwidGltZUluU2VjIiwiYmVmTWluIiwiYmVmU2VjIiwiaW5NaW5zIiwiaW5TZWMiLCJiZWZNaW5zIiwiYmVmU2VjcyIsIk51bWJlciIsImlzTmFOIiwiZSIsIm9mZnNldFgiLCJzcmNFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJwcmV2QnRuIiwidm9sdW1lIiwiaGFzQ2hpbGROb2RlcyIsImZpcnN0Q2hpbGQiLCJjYXJkc0NvbnRhaW5lciIsImFkZENhcmRzIiwiY2FyZCIsImJnSW1hZ2UiLCJob21lQmdJbWciLCJidWlsZENvbnRlbnRJbWciLCJseXJpY3MiLCJnZXRMeXJpY3MiLCJtdXNpY1BsYXllciIsIm1lZGlhUGxheWVyIiwiYXVkaW8iLCJhZGRBdWRpb0VsZW1lbnQiLCJpbmZvIiwiZ2lmIiwiYWRkU29uZ0luZm8iLCJyYW5nZSIsImFkZE11c2ljUmFuZ2VCYXIiLCJjb250cm9scyIsIm5leHRCdG4iLCJwcmV2QnRuSW1nIiwibmV4dEJ0bkltZyIsImFkZENvbnRyb2xzIiwidGFyZ2V0IiwicGFyZW50RWxlbWVudCIsImNoaWxkcmVuIiwic29uZ0luZGV4IiwiaSIsImdldENsaWNrZWQiLCJsaXN0SGVhZCIsImhlYWQiLCJhZGRIZWFkIiwic29uZ3NMaXN0IiwibGlzdCIsImdldFNvbmdzTGlzdCIsImhvbWVNc2ciLCJidWlsZENvbnRlbnQiLCJzZWFyY2hCYXIiLCJiYXIiLCJhZGRTZWFyY2hCYXIiLCJob21lQnRuIl0sInNvdXJjZVJvb3QiOiIifQ==